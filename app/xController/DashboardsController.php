<?phpApp::uses('AppController', 'Controller');/** * Instruments Controller * */class DashboardsController extends AppController{    public $helpers = array( 'StockBangladesh');    public function beforeFilter()    {        parent::beforeFilter();        //$this->Auth->allow('test');        $this->Auth->allow();    }    public function trade()    {        $StockBangladesh = $this->Components->load('StockBangladesh');        $this->set('instrumentList', $StockBangladesh->instrumentList(3));        $this->set('sellInstrumentList', $StockBangladesh->instrumentList(2));    }    public function getPrice()    {        $instrumentId=211;        if(isset($_POST['instrumentId']))        $instrumentId = $_POST['instrumentId'];    //    Configure::write('debug', 2);        $StockBangladesh = $this->Components->load('StockBangladesh');        $lastTwoMarketInfoArr = $StockBangladesh->getMarketInfo(0, 0);        $marketId = $lastTwoMarketInfoArr[0]['Market']['id'];        $lastTradeInfo = $StockBangladesh->getLastTradeInfo(3913);        //array_values($lastTradeInfo['DataBanksIntraday'])[0]['lm_date_time']        //pr(array_values($lastTradeInfo['DataBanksIntraday'])[0]['lm_date_time']);        $tradeData=$lastTradeInfo[$instrumentId];        $tradeData=array_values($tradeData)[0];        $jsonresult = json_encode($tradeData);        echo $jsonresult;      //  pr($getLastTradeInfo);        exit;    }}