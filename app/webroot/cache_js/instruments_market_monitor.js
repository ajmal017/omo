var PortletDraggable=function(){return{init:function(){if(!jQuery().sortable){return}$("#sortable_portlets").sortable({connectWith:".portlet",items:".portlet",opacity:0.8,coneHelperSize:true,placeholder:"portlet-sortable-placeholder",forcePlaceholderSize:true,tolerance:"pointer",helper:"clone",tolerance:"pointer",forcePlaceholderSize:!0,helper:"clone",cancel:".portlet-sortable-empty",revert:250,update:function(a,d){if(d.item.prev().hasClass("portlet-sortable-empty")){d.item.prev().before(d.item)}}})}}}();
/*!
 * bootstrap-select v1.5.4
 * http://silviomoreto.github.io/bootstrap-select/
 *
 * Copyright 2013 bootstrap-select
 * Licensed under the MIT license
 */
;!function(c){c.expr[":"].icontains=function(a,f,b){return c(a).text().toUpperCase().indexOf(b[3].toUpperCase())>=0};var d=function(b,e,a){if(a){a.stopPropagation();a.preventDefault()}this.$element=c(b);this.$newElement=null;this.$button=null;this.$menu=null;this.$lis=null;this.options=c.extend({},c.fn.selectpicker.defaults,this.$element.data(),typeof e=="object"&&e);if(this.options.title===null){this.options.title=this.$element.attr("title")}this.val=d.prototype.val;this.render=d.prototype.render;this.refresh=d.prototype.refresh;this.setStyle=d.prototype.setStyle;this.selectAll=d.prototype.selectAll;this.deselectAll=d.prototype.deselectAll;this.init()};d.prototype={constructor:d,init:function(){var b=this,a=this.$element.attr("id");this.$element.hide();this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement);this.$menu=this.$newElement.find("> .dropdown-menu");this.$button=this.$newElement.find("> button");this.$searchbox=this.$newElement.find("input");if(a!==undefined){this.$button.attr("data-id",a);c('label[for="'+a+'"]').click(function(e){e.preventDefault();b.$button.focus()})}this.checkDisabled();this.clickListener();if(this.options.liveSearch){this.liveSearchListener()}this.render();this.liHeight();this.setStyle();this.setWidth();if(this.options.container){this.selectPosition()}this.$menu.data("this",this);this.$newElement.data("this",this)},createDropdown:function(){var n=this.multiple?" show-tick":"";var m=this.$element.parent().hasClass("input-group")?" input-group-btn":"";var a=this.autofocus?" autofocus":"";var b=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"";var j=this.options.liveSearch?'<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" /></div>':"";var k=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">Select All</button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">Deselect All</button></div></div>':"";var l='<div class="btn-group bootstrap-select'+n+m+'"><button type="button" class="btn dropdown-toggle selectpicker" data-toggle="dropdown"'+a+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+b+j+k+'<ul class="dropdown-menu inner selectpicker" role="menu"></ul></div></div>';return c(l)},createView:function(){var b=this.createDropdown();var a=this.createLi();b.find("ul").append(a);return b},reloadLi:function(){this.destroyLi();var a=this.createLi();this.$menu.find("ul").append(a)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var b=this,a=[],f="";this.$element.find("option").each(function(){var s=c(this);var u=s.attr("class")||"";var t=s.attr("style")||"";var o=s.data("content")?s.data("content"):s.html();var q=s.data("subtext")!==undefined?'<small class="muted text-muted">'+s.data("subtext")+"</small>":"";var r=s.data("icon")!==undefined?'<i class="'+b.options.iconBase+" "+s.data("icon")+'"></i> ':"";if(r!==""&&(s.is(":disabled")||s.parent().is(":disabled"))){r="<span>"+r+"</span>"}if(!s.data("content")){o=r+'<span class="text">'+o+q+"</span>"}if(b.options.hideDisabled&&(s.is(":disabled")||s.parent().is(":disabled"))){a.push('<a style="min-height: 0; padding: 0"></a>')}else{if(s.parent().is("optgroup")&&s.data("divider")!==true){if(s.index()===0){var p=s.parent().attr("label");var e=s.parent().data("subtext")!==undefined?'<small class="muted text-muted">'+s.parent().data("subtext")+"</small>":"";var v=s.parent().data("icon")?'<i class="'+s.parent().data("icon")+'"></i> ':"";p=v+'<span class="text">'+p+e+"</span>";if(s[0].index!==0){a.push('<div class="div-contain"><div class="divider"></div></div><dt>'+p+"</dt>"+b.createA(o,"opt "+u,t))}else{a.push("<dt>"+p+"</dt>"+b.createA(o,"opt "+u,t))}}else{a.push(b.createA(o,"opt "+u,t))}}else{if(s.data("divider")===true){a.push('<div class="div-contain"><div class="divider"></div></div>')}else{if(c(this).data("hidden")===true){a.push("<a></a>")}else{a.push(b.createA(o,u,t))}}}}});c.each(a,function(i,e){var j=e==="<a></a>"?'class="hide is-hidden"':"";f+='<li rel="'+i+'"'+j+">"+e+"</li>"});if(!this.multiple&&this.$element.find("option:selected").length===0&&!this.options.title){this.$element.find("option").eq(0).prop("selected",true).attr("selected","selected")}return c(f)},createA:function(a,f,b){return'<a tabindex="0" class="'+f+'" style="'+b+'">'+a+'<i class="'+this.options.iconBase+" "+this.options.tickIcon+' icon-ok check-mark"></i></a>'},render:function(j){var k=this;if(j!==false){this.$element.find("option").each(function(e){k.setDisabled(e,c(this).is(":disabled")||c(this).parent().is(":disabled"));k.setSelected(e,c(this).is(":selected"))})}this.tabIndex();var a=this.$element.find("option:selected").map(function(){var e=c(this);var f=e.data("icon")&&k.options.showIcon?'<i class="'+k.options.iconBase+" "+e.data("icon")+'"></i> ':"";var g;if(k.options.showSubtext&&e.attr("data-subtext")&&!k.multiple){g=' <small class="muted text-muted">'+e.data("subtext")+"</small>"}else{g=""}if(e.data("content")&&k.options.showContent){return e.data("content")}else{if(e.attr("title")!==undefined){return e.attr("title")}else{return f+e.html()+g}}}).toArray();var b=!this.multiple?a[0]:a.join(this.options.multipleSeparator);if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var l=this.options.selectedTextFormat.split(">");var i=this.options.hideDisabled?":not([disabled])":"";if((l.length>1&&a.length>l[1])||(l.length==1&&a.length>=2)){b=this.options.countSelectedText.replace("{0}",a.length).replace("{1}",this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+i).length)}}this.options.title=this.$element.attr("title");if(!b){b=this.options.title!==undefined?this.options.title:this.options.noneSelectedText}this.$button.attr("title",c.trim(b));this.$newElement.find(".filter-option").html(b)},setStyle:function(a,b){if(this.$element.attr("class")){this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device/gi,""))}var f=a?a:this.options.style;if(b=="add"){this.$button.addClass(f)}else{if(b=="remove"){this.$button.removeClass(f)}else{this.$button.removeClass(this.options.style);this.$button.addClass(f)}}},liHeight:function(){if(this.options.size===false){return}var i=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",false).end().appendTo("body"),b=i.addClass("open").find("> .dropdown-menu"),j=b.find("li > a").outerHeight(),k=this.options.header?b.find(".popover-title").outerHeight():0,a=this.options.liveSearch?b.find(".bootstrap-select-searchbox").outerHeight():0,l=this.options.actionsBox?b.find(".bs-actionsbox").outerHeight():0;i.remove();this.$newElement.data("liHeight",j).data("headerHeight",k).data("searchHeight",a).data("actionsHeight",l)},setSize:function(){var H=this,M=this.$menu,G=M.find(".inner"),b=this.$newElement.outerHeight(),K=this.$newElement.data("liHeight"),x=this.$newElement.data("headerHeight"),D=this.$newElement.data("searchHeight"),I=this.$newElement.data("actionsHeight"),E=M.find("li .divider").outerHeight(true),y=parseInt(M.css("padding-top"))+parseInt(M.css("padding-bottom"))+parseInt(M.css("border-top-width"))+parseInt(M.css("border-bottom-width")),A=this.options.hideDisabled?":not(.disabled)":"",B=c(window),J=y+parseInt(M.css("margin-top"))+parseInt(M.css("margin-bottom"))+2,z,a,w,F=function(){a=H.$newElement.offset().top-B.scrollTop();w=B.height()-a-b};F();if(this.options.header){M.css("padding-top",0)}if(this.options.size=="auto"){var L=function(){var e,f=H.$lis.not(".hide");F();z=w-J;if(H.options.dropupAuto){H.$newElement.toggleClass("dropup",(a>w)&&((z-J)<M.height()))}if(H.$newElement.hasClass("dropup")){z=a-J}if((f.length+f.find("dt").length)>3){e=K*3+J-2}else{e=0}M.css({"max-height":z+"px",overflow:"hidden","min-height":e+x+D+I+"px"});G.css({"max-height":z-x-D-I-y+"px","overflow-y":"auto","min-height":Math.max(e-y,0)+"px"})};L();this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",L);c(window).off("resize.getSize").on("resize.getSize",L);c(window).off("scroll.getSize").on("scroll.getSize",L)}else{if(this.options.size&&this.options.size!="auto"&&M.find("li"+A).length>this.options.size){var C=M.find("li"+A+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index();var N=M.find("li").slice(0,C+1).find(".div-contain").length;z=K*this.options.size+N*E+y;if(H.options.dropupAuto){this.$newElement.toggleClass("dropup",(a>w)&&(z<M.height()))}M.css({"max-height":z+x+D+I+"px",overflow:"hidden"});G.css({"max-height":z-y+"px","overflow-y":"auto"})}}},setWidth:function(){if(this.options.width=="auto"){this.$menu.css("min-width","0");var a=this.$newElement.clone().appendTo("body");var f=a.find("> .dropdown-menu").css("width");var b=a.css("width","auto").find("> button").css("width");a.remove();this.$newElement.css("width",Math.max(parseInt(f),parseInt(b))+"px")}else{if(this.options.width=="fit"){this.$menu.css("min-width","");this.$newElement.css("width","").addClass("fit-width")}else{if(this.options.width){this.$menu.css("min-width","");this.$newElement.css("width",this.options.width)}else{this.$menu.css("min-width","");this.$newElement.css("width","")}}}if(this.$newElement.hasClass("fit-width")&&this.options.width!=="fit"){this.$newElement.removeClass("fit-width")}},selectPosition:function(){var j=this,k="<div />",i=c(k),a,b,l=function(e){i.addClass(e.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",e.hasClass("dropup"));a=e.offset();b=e.hasClass("dropup")?0:e[0].offsetHeight;i.css({top:a.top+b,left:a.left,width:e[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){if(j.isDisabled()){return}l(c(this));i.appendTo(j.options.container);i.toggleClass("open",!c(this).hasClass("open"));i.append(j.$menu)});c(window).resize(function(){l(j.$newElement)});c(window).on("scroll",function(){l(j.$newElement)});c("html").on("click",function(e){if(c(e.target).closest(j.$newElement).length<1){i.removeClass("open")}})},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement);if(this.options.container){this.$menu.hide()}},refresh:function(){this.$lis=null;this.reloadLi();this.render();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},update:function(){this.reloadLi();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},setSelected:function(b,a){if(this.$lis==null){this.$lis=this.$menu.find("li")}c(this.$lis[b]).toggleClass("selected",a)},setDisabled:function(b,a){if(this.$lis==null){this.$lis=this.$menu.find("li")}if(a){c(this.$lis[b]).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1)}else{c(this.$lis[b]).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)}},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var a=this;if(this.isDisabled()){this.$button.addClass("disabled").attr("tabindex",-1)}else{if(this.$button.hasClass("disabled")){this.$button.removeClass("disabled")}if(this.$button.attr("tabindex")==-1){if(!this.$element.data("tabindex")){this.$button.removeAttr("tabindex")}}}this.$button.click(function(){return !a.isDisabled()})},tabIndex:function(){if(this.$element.is("[tabindex]")){this.$element.data("tabindex",this.$element.attr("tabindex"));this.$button.attr("tabindex",this.$element.data("tabindex"))}},clickListener:function(){var a=this;c("body").on("touchstart.dropdown",".dropdown-menu",function(b){b.stopPropagation()});this.$newElement.on("click",function(){a.setSize();if(!a.options.liveSearch&&!a.multiple){setTimeout(function(){a.$menu.find(".selected a").focus()},10)}});this.$menu.on("click","li a",function(w){var G=c(this).parent().index(),x=a.$element.val(),B=a.$element.prop("selectedIndex");if(a.multiple){w.stopPropagation()}w.preventDefault();if(!a.isDisabled()&&!c(this).parent().hasClass("disabled")){var y=a.$element.find("option"),F=y.eq(G),E=F.prop("selected"),b=F.parent("optgroup"),u=a.options.maxOptions,C=b.data("maxOptions")||false;if(!a.multiple){y.prop("selected",false);F.prop("selected",true);a.$menu.find(".selected").removeClass("selected");a.setSelected(G,true)}else{F.prop("selected",!E);a.setSelected(G,!E);if((u!==false)||(C!==false)){var v=u<y.filter(":selected").length,A=C<b.find("option:selected").length,H=a.options.maxOptionsText,D=H[0].replace("{n}",u),e=H[1].replace("{n}",C),z=c('<div class="notify"></div>');if((u&&v)||(C&&A)){if(H[2]){D=D.replace("{var}",H[2][u>1?0:1]);e=e.replace("{var}",H[2][C>1?0:1])}F.prop("selected",false);a.$menu.append(z);if(u&&v){z.append(c("<div>"+D+"</div>"));a.$element.trigger("maxReached.bs.select")}if(C&&A){z.append(c("<div>"+e+"</div>"));a.$element.trigger("maxReachedGrp.bs.select")}setTimeout(function(){a.setSelected(G,false)},10);z.delay(750).fadeOut(300,function(){c(this).remove()})}}}if(!a.multiple){a.$button.focus()}else{if(a.options.liveSearch){a.$searchbox.focus()}}if((x!=a.$element.val()&&a.multiple)||(B!=a.$element.prop("selectedIndex")&&!a.multiple)){a.$element.change()}}});this.$menu.on("click","li.disabled a, li dt, li .div-contain, .popover-title, .popover-title :not(.close)",function(b){if(b.target==this){b.preventDefault();b.stopPropagation();if(!a.options.liveSearch){a.$button.focus()}else{a.$searchbox.focus()}}});this.$menu.on("click",".popover-title .close",function(){a.$button.focus()});this.$searchbox.on("click",function(b){b.stopPropagation()});this.$menu.on("click",".actions-btn",function(b){if(a.options.liveSearch){a.$searchbox.focus()}else{a.$button.focus()}b.preventDefault();b.stopPropagation();if(c(this).is(".bs-select-all")){a.selectAll()}else{a.deselectAll()}a.$element.change()});this.$element.change(function(){a.render(false)})},liveSearchListener:function(){var a=this,b=c('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api",function(){a.$menu.find(".active").removeClass("active");if(!!a.$searchbox.val()){a.$searchbox.val("");a.$lis.not(".is-hidden").removeClass("hide");if(!!b.parent().length){b.remove()}}if(!a.multiple){a.$menu.find(".selected").addClass("active")}setTimeout(function(){a.$searchbox.focus()},10)});this.$searchbox.on("input propertychange",function(){if(a.$searchbox.val()){a.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+a.$searchbox.val()+")").parent().addClass("hide");if(!a.$menu.find("li").filter(":visible:not(.no-results)").length){if(!!b.parent().length){b.remove()}b.html(a.options.noneResultsText+' "'+a.$searchbox.val()+'"').show();a.$menu.find("li").last().after(b)}else{if(!!b.parent().length){b.remove()}}}else{a.$lis.not(".is-hidden").removeClass("hide");if(!!b.parent().length){b.remove()}}a.$menu.find("li.active").removeClass("active");a.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus();c(this).focus()});this.$menu.on("mouseenter","a",function(e){a.$menu.find(".active").removeClass("active");c(e.currentTarget).parent().not(".disabled").addClass("active")});this.$menu.on("mouseleave","a",function(){a.$menu.find(".active").removeClass("active")})},val:function(a){if(a!==undefined){this.$element.val(a);this.$element.change();return this.$element}else{return this.$element.val()}},selectAll:function(){if(this.$lis==null){this.$lis=this.$menu.find("li")}this.$element.find("option:enabled").prop("selected",true);c(this.$lis).filter(":not(.disabled)").addClass("selected");this.render(false)},deselectAll:function(){if(this.$lis==null){this.$lis=this.$menu.find("li")}this.$element.find("option:enabled").prop("selected",false);c(this.$lis).filter(":not(.disabled)").removeClass("selected");this.render(false)},keydown:function(e){var b,u,A,v,y,z,a,D,B,w,E,H,C={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};b=c(this);A=b.parent();if(b.is("input")){A=b.parent().parent()}w=A.data("this");if(w.options.liveSearch){A=b.parent().parent()}if(w.options.container){A=w.$menu}u=c("[role=menu] li:not(.divider) a",A);H=w.$menu.parent().hasClass("open");if(!H&&/([0-9]|[A-z])/.test(String.fromCharCode(e.keyCode))){if(!w.options.container){w.setSize();w.$menu.parent().addClass("open");H=w.$menu.parent().hasClass("open")}else{w.$newElement.trigger("click")}w.$searchbox.focus()}if(w.options.liveSearch){if(/(^9$|27)/.test(e.keyCode)&&H&&w.$menu.find(".active").length===0){e.preventDefault();w.$menu.parent().removeClass("open");w.$button.focus()}u=c("[role=menu] li:not(.divider):visible",A);if(!b.val()&&!/(38|40)/.test(e.keyCode)){if(u.filter(".active").length===0){u=w.$newElement.find("li").filter(":icontains("+C[e.keyCode]+")")}}}if(!u.length){return}if(/(38|40)/.test(e.keyCode)){v=u.index(u.filter(":focus"));z=u.parent(":not(.disabled):visible").first().index();a=u.parent(":not(.disabled):visible").last().index();y=u.eq(v).parent().nextAll(":not(.disabled):visible").eq(0).index();D=u.eq(v).parent().prevAll(":not(.disabled):visible").eq(0).index();B=u.eq(y).parent().prevAll(":not(.disabled):visible").eq(0).index();if(w.options.liveSearch){u.each(function(f){if(c(this).is(":not(.disabled)")){c(this).data("index",f)}});v=u.index(u.filter(".active"));z=u.filter(":not(.disabled):visible").first().data("index");a=u.filter(":not(.disabled):visible").last().data("index");y=u.eq(v).nextAll(":not(.disabled):visible").eq(0).data("index");D=u.eq(v).prevAll(":not(.disabled):visible").eq(0).data("index");B=u.eq(y).prevAll(":not(.disabled):visible").eq(0).data("index")}E=b.data("prevIndex");if(e.keyCode==38){if(w.options.liveSearch){v-=1}if(v!=B&&v>D){v=D}if(v<z){v=z}if(v==E){v=a}}if(e.keyCode==40){if(w.options.liveSearch){v+=1}if(v==-1){v=0}if(v!=B&&v<y){v=y}if(v>a){v=a}if(v==E){v=z}}b.data("prevIndex",v);if(!w.options.liveSearch){u.eq(v).focus()}else{e.preventDefault();if(!b.is(".dropdown-toggle")){u.removeClass("active");u.eq(v).addClass("active").find("a").focus();b.focus()}}}else{if(!b.is("input")){var F=[],x,G;u.each(function(){if(c(this).parent().is(":not(.disabled)")){if(c.trim(c(this).text().toLowerCase()).substring(0,1)==C[e.keyCode]){F.push(c(this).parent().index())}}});x=c(document).data("keycount");x++;c(document).data("keycount",x);G=c.trim(c(":focus").text().toLowerCase()).substring(0,1);if(G!=C[e.keyCode]){x=1;c(document).data("keycount",x)}else{if(x>=F.length){c(document).data("keycount",0);if(x>F.length){x=1}}}u.eq(F[x-1]).focus()}}if(/(13|32|^9$)/.test(e.keyCode)&&H){if(!/(32)/.test(e.keyCode)){e.preventDefault()}if(!w.options.liveSearch){c(":focus").click()}else{if(!/(32)/.test(e.keyCode)){w.$menu.find(".active a").click();b.focus()}}c(document).data("keycount",0)}if((/(^9$|27)/.test(e.keyCode)&&H&&(w.multiple||w.options.liveSearch))||(/(27)/.test(e.keyCode)&&!H)){w.$menu.parent().removeClass("open");w.$button.focus()}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){this.$newElement.remove();this.$element.remove()}};c.fn.selectpicker=function(h,b){var j=arguments;var a;var i=this.each(function(){if(c(this).is("select")){var e=c(this),f=e.data("selectpicker"),o=typeof h=="object"&&h;if(!f){e.data("selectpicker",(f=new d(this,o,b)))}else{if(o){for(var n in o){f.options[n]=o[n]}}}if(typeof h=="string"){var g=h;if(f[g] instanceof Function){[].shift.apply(j);a=f[g].apply(f,j)}else{a=f.options[g]}}}});if(a!==undefined){return a}else{return i}};c.fn.selectpicker.defaults={style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:"{0} of {1} selected",maxOptionsText:["Limit reached ({n} {var} max)","Group limit reached ({n} {var} max)",["items","item"]],width:false,container:false,hideDisabled:false,showSubtext:false,showIcon:true,showContent:true,dropupAuto:true,header:false,liveSearch:false,actionsBox:false,multipleSeparator:", ",iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:false};c(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",d.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",function(a){a.stopPropagation()})}(window.jQuery);(function(e,d,f){(function(b){typeof define=="function"&&define.amd?define(["jquery"],b):jQuery&&!jQuery.fn.sparkline&&b(jQuery)})(function(ar){var aq={},ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ad,ab,Z,X,V,T,R,P,N,c,ae,ac,aa,Y,W,U,S,Q,O,M,b,a=0;ap=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:f,normalRangeMax:f,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:f,chartRangeMax:f,chartRangeMinX:f,chartRangeMaxX:f,tooltipFormat:new an('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:f,nullColor:f,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:f,chartRangeMin:f,chartRangeClip:!1,colorMap:f,tooltipFormat:new an('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new an('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:f,thresholdValue:0,chartRangeMax:f,chartRangeMin:f,chartRangeClip:!1,tooltipFormat:new an("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:f,tooltipFormat:new an("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new an('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:f,targetColor:"#4a2",chartRangeMax:f,chartRangeMin:f,tooltipFormat:new an("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},W='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',ao=function(){var h,g;return h=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(h.prototype=ar.extend(new arguments[0],arguments[arguments.length-1]),h._super=arguments[0].prototype):h.prototype=arguments[arguments.length-1],arguments.length>2&&(g=Array.prototype.slice.call(arguments,1,-1),g.unshift(h.prototype),ar.extend.apply(ar,g))):h.prototype=arguments[0],h.prototype.cls=h,h},ar.SPFormatClass=an=ao({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(h,g){this.format=h,this.fclass=g},render:function(u,t,s){var r=this,q=u,p,o,n,m,l;return this.format.replace(this.fre,function(){var g;return o=arguments[1],n=arguments[3],p=r.precre.exec(o),p?(l=p[2],o=p[1]):l=!1,m=q[o],m===f?"":n&&t&&t[n]?(g=t[n],g.get?t[n].get(m)||m:t[n][m]||m):(ah(m)&&(s.get("numberFormatter")?m=s.get("numberFormatter")(m):m=Z(m,l,s.get("numberDigitGroupCount"),s.get("numberDigitGroupSep"),s.get("numberDecimalMark"))),m)})}}),ar.spformat=function(h,g){return new an(h,g)},am=function(h,g,i){return h<g?g:h>i?i:h},al=function(g,i){var h;return i===2?(h=d.floor(g.length/2),g.length%2?g[h]:(g[h-1]+g[h])/2):g.length%2?(h=(g.length*i+i)/4,h%1?(g[d.floor(h)]+g[d.floor(h)-1])/2:g[h-1]):(h=(g.length*i+2)/4,h%1?(g[d.floor(h)]+g[d.floor(h)-1])/2:g[h-1])},ak=function(h){var g;switch(h){case"undefined":h=f;break;case"null":h=null;break;case"true":h=!0;break;case"false":h=!1;break;default:g=parseFloat(h),h==g&&(h=g)}return h},aj=function(h){var g,i=[];for(g=h.length;g--;){i[g]=ak(h[g])}return i},ai=function(h,g){var k,j,i=[];for(k=0,j=h.length;k<j;k++){h[k]!==g&&i.push(h[k])}return i},ah=function(g){return !isNaN(parseFloat(g))&&isFinite(g)},Z=function(j,i,o,n,m){var l,k;j=(i===!1?parseFloat(j).toString():j.toFixed(i)).split(""),l=(l=ar.inArray(".",j))<0?j.length:l,l<j.length&&(j[l]=m);for(k=l-o;k>0;k-=o){j.splice(k,0,n)}return j.join("")},ag=function(h,g,j){var i;for(i=g.length;i--;){if(j&&g[i]===null){continue}if(g[i]!==h){return !1}}return !0},af=function(h){var g=0,i;for(i=h.length;i--;){g+=typeof h[i]=="number"?h[i]:0}return g},ab=function(g){return ar.isArray(g)?g:[g]},ad=function(g){var h;e.createStyleSheet?e.createStyleSheet().cssText=g:(h=e.createElement("style"),h.type="text/css",e.getElementsByTagName("head")[0].appendChild(h),h[typeof e.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=g)},ar.fn.simpledraw=function(k,q,p,o){var n,m;if(p&&(n=this.data("_jqs_vcanvas"))){return n}if(ar.fn.sparkline.canvas===!1){return !1}if(ar.fn.sparkline.canvas===f){var l=e.createElement("canvas");if(!l.getContext||!l.getContext("2d")){if(!e.namespaces||!!e.namespaces.v){return ar.fn.sparkline.canvas=!1,!1}e.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),ar.fn.sparkline.canvas=function(h,g,j,i){return new M(h,g,j)}}else{ar.fn.sparkline.canvas=function(h,g,j,i){return new O(h,g,j,i)}}}return k===f&&(k=ar(this).innerWidth()),q===f&&(q=ar(this).innerHeight()),n=ar.fn.sparkline.canvas(k,q,this,o),m=ar(this).data("_jqs_mhandler"),m&&m.registerCanvas(n),n},ar.fn.cleardraw=function(){var g=this.data("_jqs_vcanvas");g&&g.reset()},ar.RangeMapClass=X=ao({init:function(h){var g,j,i=[];for(g in h){h.hasOwnProperty(g)&&typeof g=="string"&&g.indexOf(":")>-1&&(j=g.split(":"),j[0]=j[0].length===0?-Infinity:parseFloat(j[0]),j[1]=j[1].length===0?Infinity:parseFloat(j[1]),j[2]=h[g],i.push(j))}this.map=h,this.rangelist=i||!1},get:function(h){var g=this.rangelist,k,j,i;if((i=this.map[h])!==f){return i}if(g){for(k=g.length;k--;){j=g[k];if(j[0]<=h&&j[1]>=h){return j[2]}}}return f}}),ar.range_map=function(g){return new X(g)},V=ao({init:function(h,g){var i=ar(h);this.$el=i,this.options=g,this.currentPageX=0,this.currentPageY=0,this.el=h,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!g.get("disableTooltips"),this.highlightEnabled=!g.get("disableHighlight")},registerSparkline:function(g){this.splist.push(g),this.over&&this.updateDisplay()},registerCanvas:function(h){var g=ar(h.canvas);this.canvas=h,this.$canvas=g,g.mouseenter(ar.proxy(this.mouseenter,this)),g.mouseleave(ar.proxy(this.mouseleave,this)),g.click(ar.proxy(this.mouseclick,this))},reset:function(g){this.splist=[],this.tooltip&&g&&(this.tooltip.remove(),this.tooltip=f)},mouseclick:function(h){var g=ar.Event("sparklineClick");g.originalEvent=h,g.sparklines=this.splist,this.$el.trigger(g)},mouseenter:function(g){ar(e.body).unbind("mousemove.jqs"),ar(e.body).bind("mousemove.jqs",ar.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=g.pageX,this.currentPageY=g.pageY,this.currentEl=g.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new T(this.options),this.tooltip.updatePosition(g.pageX,g.pageY)),this.updateDisplay()},mouseleave:function(){ar(e.body).unbind("mousemove.jqs");var h=this.splist,l=h.length,k=!1,j,i;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(i=0;i<l;i++){j=h[i],j.clearRegionHighlight()&&(k=!0)}k&&this.canvas.render()},mousemove:function(g){this.currentPageX=g.pageX,this.currentPageY=g.pageY,this.currentEl=g.target,this.tooltip&&this.tooltip.updatePosition(g.pageX,g.pageY),this.updateDisplay()},updateDisplay:function(){var w=this.splist,v=w.length,u=!1,t=this.$canvas.offset(),s=this.currentPageX-t.left,r=this.currentPageY-t.top,q,p,o,n,m;if(!this.over){return}for(o=0;o<v;o++){p=w[o],n=p.setRegionHighlight(this.currentEl,s,r),n&&(u=!0)}if(u){m=ar.Event("sparklineRegionChange"),m.sparklines=this.splist,this.$el.trigger(m);if(this.tooltip){q="";for(o=0;o<v;o++){p=w[o],q+=p.getCurrentRegionTooltip()}this.tooltip.setContent(q)}this.disableHighlight||this.canvas.render()}n===null&&this.mouseleave()}}),T=ao({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(g){var j=g.get("tooltipClassname","jqstooltip"),i=this.sizeStyle,h;this.container=g.get("tooltipContainer")||e.body,this.tooltipOffsetX=g.get("tooltipOffsetX",10),this.tooltipOffsetY=g.get("tooltipOffsetY",12),ar("#jqssizetip").remove(),ar("#jqstooltip").remove(),this.sizetip=ar("<div/>",{id:"jqssizetip",style:i,"class":j}),this.tooltip=ar("<div/>",{id:"jqstooltip","class":j}).appendTo(this.container),h=this.tooltip.offset(),this.offsetLeft=h.left,this.offsetTop=h.top,this.hidden=!0,ar(window).unbind("resize.jqs scroll.jqs"),ar(window).bind("resize.jqs scroll.jqs",ar.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=ar(window).scrollTop(),this.scrollLeft=ar(window).scrollLeft(),this.scrollRight=this.scrollLeft+ar(window).width(),this.updatePosition()},getSize:function(g){this.sizetip.html(g).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(g){if(!g){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(g),this.tooltip.html(g).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(h,g){if(h===f){if(this.mousex===f){return}h=this.mousex-this.offsetLeft,g=this.mousey-this.offsetTop}else{this.mousex=h-=this.offsetLeft,this.mousey=g-=this.offsetTop}if(!this.height||!this.width||this.hidden){return}g-=this.height+this.tooltipOffsetY,h+=this.tooltipOffsetX,g<this.scrollTop&&(g=this.scrollTop),h<this.scrollLeft?h=this.scrollLeft:h+this.width>this.scrollRight&&(h=this.scrollRight-this.width),this.tooltip.css({left:h,top:g})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=f,ar(window).unbind("resize.jqs scroll.jqs")}}),U=function(){ad(W)},ar(U),b=[],ar.fn.sparkline=function(g,h){return this.each(function(){var m=new ar.fn.sparkline.options(this,h),l=ar(this),k,j;k=function(){var t,s,r,q,p,o,n;if(g==="html"||g===f){n=this.getAttribute(m.get("tagValuesAttribute"));if(n===f||n===null){n=l.html()}t=n.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else{t=g}s=m.get("width")==="auto"?t.length*m.get("defaultPixelsPerValue"):m.get("width");if(m.get("height")==="auto"){if(!m.get("composite")||!ar.data(this,"_jqs_vcanvas")){q=e.createElement("span"),q.innerHTML="a",l.html(q),r=ar(q).innerHeight()||ar(q).height(),ar(q).remove(),q=null}}else{r=m.get("height")}m.get("disableInteraction")?p=!1:(p=ar.data(this,"_jqs_mhandler"),p?m.get("composite")||p.reset():(p=new V(this,m),ar.data(this,"_jqs_mhandler",p)));if(m.get("composite")&&!ar.data(this,"_jqs_vcanvas")){ar.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),ar.data(this,"_jqs_errnotify",!0));return}o=new (ar.fn.sparkline[m.get("type")])(this,t,m,s,r),o.render(),p&&p.registerSparkline(o)};if(ar(this).html()&&!m.get("disableHiddenCheck")&&ar(this).is(":hidden")||!ar(this).parents("body").length){if(!m.get("composite")&&ar.data(this,"_jqs_pending")){for(j=b.length;j;j--){b[j-1][0]==this&&b.splice(j-1,1)}}b.push([this,k]),ar.data(this,"_jqs_pending",!0)}else{k.call(this)}})},ar.fn.sparkline.defaults=ap(),ar.sparkline_display_visible=function(){var h,g,j,i=[];for(g=0,j=b.length;g<j;g++){h=b[g][0],ar(h).is(":visible")&&!ar(h).parents().is(":hidden")?(b[g][1].call(h),ar.data(b[g][0],"_jqs_pending",!1),i.push(g)):!ar(h).closest("html").length&&!ar.data(h,"_jqs_pending")&&(ar.data(b[g][0],"_jqs_pending",!1),i.push(g))}for(g=i.length;g;g--){b.splice(i[g-1],1)}},ar.fn.sparkline.options=ao({init:function(j,i){var n,m,l,k;this.userOptions=i=i||{},this.tag=j,this.tagValCache={},m=ar.fn.sparkline.defaults,l=m.common,this.tagOptionsPrefix=i.enableTagOptions&&(i.tagOptionsPrefix||l.tagOptionsPrefix),k=this.getTagSetting("type"),k===aq?n=m[i.type||l.type]:n=m[k],this.mergedOptions=ar.extend({},l,n,i)},getTagSetting:function(j){var i=this.tagOptionsPrefix,n,m,l,k;if(i===!1||i===f){return aq}if(this.tagValCache.hasOwnProperty(j)){n=this.tagValCache.key}else{n=this.tag.getAttribute(i+j);if(n===f||n===null){n=aq}else{if(n.substr(0,1)==="["){n=n.substr(1,n.length-2).split(",");for(m=n.length;m--;){n[m]=ak(n[m].replace(/(^\s*)|(\s*$)/g,""))}}else{if(n.substr(0,1)==="{"){l=n.substr(1,n.length-2).split(","),n={};for(m=l.length;m--;){k=l[m].split(":",2),n[k[0].replace(/(^\s*)|(\s*$)/g,"")]=ak(k[1].replace(/(^\s*)|(\s*$)/g,""))}}else{n=ak(n)}}}this.tagValCache.key=n}return n},get:function(h,g){var j=this.getTagSetting(h),i;return j!==aq?j:(i=this.mergedOptions[h])===f?g:i}}),ar.fn.sparkline._base=ao({disabled:!1,init:function(i,h,l,k,j){this.el=i,this.$el=ar(i),this.values=h,this.options=l,this.width=k,this.height=j,this.currentRegion=f},initTarget:function(){var g=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),g))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(h,g){},setRegionHighlight:function(i,h,m){var l=this.currentRegion,k=!this.options.get("disableHighlight"),j;return h>this.canvasWidth||m>this.canvasHeight||h<0||m<0?null:(j=this.getRegion(i,h,m),l!==j?(l!==f&&k&&this.removeHighlight(),this.currentRegion=j,j!==f&&k&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==f?(this.removeHighlight(),this.currentRegion=f,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(g){},getCurrentRegionTooltip:function(){var H=this.options,G="",F=[],E,D,C,B,A,z,y,x,w,v,u,h,J,I;if(this.currentRegion===f){return""}E=this.getCurrentRegionFields(),u=H.get("tooltipFormatter");if(u){return u(this,H,E)}H.get("tooltipChartTitle")&&(G+='<div class="jqs jqstitle">'+H.get("tooltipChartTitle")+"</div>\n"),D=this.options.get("tooltipFormat");if(!D){return""}ar.isArray(D)||(D=[D]),ar.isArray(E)||(E=[E]),y=this.options.get("tooltipFormatFieldlist"),x=this.options.get("tooltipFormatFieldlistKey");if(y&&x){w=[];for(z=E.length;z--;){v=E[z][x],(I=ar.inArray(v,y))!=-1&&(w[I]=E[z])}E=w}C=D.length,J=E.length;for(z=0;z<C;z++){h=D[z],typeof h=="string"&&(h=new an(h)),B=h.fclass||"jqsfield";for(I=0;I<J;I++){if(!E[I].isNull||!H.get("tooltipSkipNull")){ar.extend(E[I],{prefix:H.get("tooltipPrefix"),suffix:H.get("tooltipSuffix")}),A=h.render(E[I],H.get("tooltipValueLookups"),H),F.push('<div class="'+B+'">'+A+"</div>")}}}return F.length?G+F.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(i,q){var p=q.get("highlightColor"),o=q.get("highlightLighten"),n,m,l,k;if(p){return p}if(o){n=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(i)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(i);if(n){l=[],m=i.length===4?16:1;for(k=0;k<3;k++){l[k]=am(d.round(parseInt(n[k+1],16)*m*o),0,255)}return"rgb("+l.join(",")+")"}}return i}}),R={changeHighlight:function(h){var g=this.currentRegion,k=this.target,j=this.regionShapes[g],i;j&&(i=this.renderRegion(g,h),ar.isArray(i)||ar.isArray(j)?(k.replaceWithShapes(j,i),this.regionShapes[g]=ar.map(i,function(l){return l.id})):(k.replaceWithShape(j,i),this.regionShapes[g]=i.id))},render:function(){var j=this.values,i=this.target,o=this.regionShapes,n,m,l,k;if(!this.cls._super.render.call(this)){return}for(l=j.length;l--;){n=this.renderRegion(l);if(n){if(ar.isArray(n)){m=[];for(k=n.length;k--;){n[k].append(),m.push(n[k].id)}o[l]=m}else{n.append(),o[l]=n.id}}else{o[l]=null}}i.render()}},ar.fn.sparkline.line=P=ao(ar.fn.sparkline._base,{type:"line",init:function(h,g,k,j,i){P._super.init.call(this,h,g,k,j,i),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(h,g,k){var j,i=this.regionMap;for(j=i.length;j--;){if(i[j]!==null&&g>=i[j][0]&&g<=i[j][1]){return i[j][2]}}return f},getCurrentRegionFields:function(){var g=this.currentRegion;return{isNull:this.yvalues[g]===null,x:this.xvalues[g],y:this.yvalues[g],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:g}},renderHighlight:function(){var s=this.currentRegion,r=this.target,q=this.vertices[s],p=this.options,o=p.get("spotRadius"),n=p.get("highlightSpotColor"),m=p.get("highlightLineColor"),l,k;if(!q){return}o&&n&&(l=r.drawCircle(q[0],q[1],o,f,n),this.highlightSpotId=l.id,r.insertAfterShape(this.lastShapeId,l)),m&&(k=r.drawLine(q[0],this.canvasTop,q[0],this.canvasTop+this.canvasHeight,m),this.highlightLineId=k.id,r.insertAfterShape(this.lastShapeId,k))},removeHighlight:function(){var g=this.target;this.highlightSpotId&&(g.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(g.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var u=this.values,t=u.length,s=this.xvalues,r=this.yvalues,q=this.yminmax,p,o,n,m,l;for(p=0;p<t;p++){o=u[p],n=typeof u[p]=="string",m=typeof u[p]=="object"&&u[p] instanceof Array,l=n&&u[p].split(":"),n&&l.length===2?(s.push(Number(l[0])),r.push(Number(l[1])),q.push(Number(l[1]))):m?(s.push(o[0]),r.push(o[1]),q.push(o[1])):(s.push(p),u[p]===null||u[p]==="null"?r.push(null):(r.push(Number(o)),q.push(Number(o))))}this.options.get("xvalues")&&(s=this.options.get("xvalues")),this.maxy=this.maxyorg=d.max.apply(d,q),this.miny=this.minyorg=d.min.apply(d,q),this.maxx=d.max.apply(d,s),this.minx=d.min.apply(d,s),this.xvalues=s,this.yvalues=r,this.yminmax=q},processRangeOptions:function(){var h=this.options,g=h.get("normalRangeMin"),i=h.get("normalRangeMax");g!==f&&(g<this.miny&&(this.miny=g),i>this.maxy&&(this.maxy=i)),h.get("chartRangeMin")!==f&&(h.get("chartRangeClip")||h.get("chartRangeMin")<this.miny)&&(this.miny=h.get("chartRangeMin")),h.get("chartRangeMax")!==f&&(h.get("chartRangeClip")||h.get("chartRangeMax")>this.maxy)&&(this.maxy=h.get("chartRangeMax")),h.get("chartRangeMinX")!==f&&(h.get("chartRangeClipX")||h.get("chartRangeMinX")<this.minx)&&(this.minx=h.get("chartRangeMinX")),h.get("chartRangeMaxX")!==f&&(h.get("chartRangeClipX")||h.get("chartRangeMaxX")>this.maxx)&&(this.maxx=h.get("chartRangeMaxX"))},drawNormalRange:function(t,s,r,q,p){var o=this.options.get("normalRangeMin"),n=this.options.get("normalRangeMax"),m=s+d.round(r-r*((n-this.miny)/p)),l=d.round(r*(n-o)/p);this.target.drawRect(t,m,q,l,f,this.options.get("normalRangeColor")).append()},render:function(){var aV=this.options,aU=this.target,aT=this.canvasWidth,aS=this.canvasHeight,aR=this.vertices,aQ=aV.get("spotRadius"),aP=this.regionMap,aO,aN,aM,aL,aK,aJ,aH,aF,aD,aA,ay,aw,at,x,aI,aG,aE,aC,aB,az,ax,av,au,L,t;if(!P._super.render.call(this)){return}this.scanValues(),this.processRangeOptions(),au=this.xvalues,L=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2){return}aL=aK=0,aO=this.maxx-this.minx===0?1:this.maxx-this.minx,aN=this.maxy-this.miny===0?1:this.maxy-this.miny,aM=this.yvalues.length-1,aQ&&(aT<aQ*4||aS<aQ*4)&&(aQ=0);if(aQ){ax=aV.get("highlightSpotColor")&&!aV.get("disableInteraction");if(ax||aV.get("minSpotColor")||aV.get("spotColor")&&L[aM]===this.miny){aS-=d.ceil(aQ)}if(ax||aV.get("maxSpotColor")||aV.get("spotColor")&&L[aM]===this.maxy){aS-=d.ceil(aQ),aL+=d.ceil(aQ)}if(ax||(aV.get("minSpotColor")||aV.get("maxSpotColor"))&&(L[0]===this.miny||L[0]===this.maxy)){aK+=d.ceil(aQ),aT-=d.ceil(aQ)}if(ax||aV.get("spotColor")||aV.get("minSpotColor")||aV.get("maxSpotColor")&&(L[aM]===this.miny||L[aM]===this.maxy)){aT-=d.ceil(aQ)}}aS--,aV.get("normalRangeMin")!==f&&!aV.get("drawNormalOnTop")&&this.drawNormalRange(aK,aL,aS,aT,aN),aH=[],aF=[aH],x=aI=null,aG=L.length;for(t=0;t<aG;t++){aD=au[t],ay=au[t+1],aA=L[t],aw=aK+d.round((aD-this.minx)*(aT/aO)),at=t<aG-1?aK+d.round((ay-this.minx)*(aT/aO)):aT,aI=aw+(at-aw)/2,aP[t]=[x||0,aI,t],x=aI,aA===null?t&&(L[t-1]!==null&&(aH=[],aF.push(aH)),aR.push(null)):(aA<this.miny&&(aA=this.miny),aA>this.maxy&&(aA=this.maxy),aH.length||aH.push([aw,aL+aS]),aJ=[aw,aL+d.round(aS-aS*((aA-this.miny)/aN))],aH.push(aJ),aR.push(aJ))}aE=[],aC=[],aB=aF.length;for(t=0;t<aB;t++){aH=aF[t],aH.length&&(aV.get("fillColor")&&(aH.push([aH[aH.length-1][0],aL+aS]),aC.push(aH.slice(0)),aH.pop()),aH.length>2&&(aH[0]=[aH[0][0],aH[1][1]]),aE.push(aH))}aB=aC.length;for(t=0;t<aB;t++){aU.drawShape(aC[t],aV.get("fillColor"),aV.get("fillColor")).append()}aV.get("normalRangeMin")!==f&&aV.get("drawNormalOnTop")&&this.drawNormalRange(aK,aL,aS,aT,aN),aB=aE.length;for(t=0;t<aB;t++){aU.drawShape(aE[t],aV.get("lineColor"),f,aV.get("lineWidth")).append()}if(aQ&&aV.get("valueSpots")){az=aV.get("valueSpots"),az.get===f&&(az=new X(az));for(t=0;t<aG;t++){av=az.get(L[t]),av&&aU.drawCircle(aK+d.round((au[t]-this.minx)*(aT/aO)),aL+d.round(aS-aS*((L[t]-this.miny)/aN)),aQ,f,av).append()}}aQ&&aV.get("spotColor")&&L[aM]!==null&&aU.drawCircle(aK+d.round((au[au.length-1]-this.minx)*(aT/aO)),aL+d.round(aS-aS*((L[aM]-this.miny)/aN)),aQ,f,aV.get("spotColor")).append(),this.maxy!==this.minyorg&&(aQ&&aV.get("minSpotColor")&&(aD=au[ar.inArray(this.minyorg,L)],aU.drawCircle(aK+d.round((aD-this.minx)*(aT/aO)),aL+d.round(aS-aS*((this.minyorg-this.miny)/aN)),aQ,f,aV.get("minSpotColor")).append()),aQ&&aV.get("maxSpotColor")&&(aD=au[ar.inArray(this.maxyorg,L)],aU.drawCircle(aK+d.round((aD-this.minx)*(aT/aO)),aL+d.round(aS-aS*((this.maxyorg-this.miny)/aN)),aQ,f,aV.get("maxSpotColor")).append())),this.lastShapeId=aU.getLastShapeId(),this.canvasTop=aL,aU.render()}}),ar.fn.sparkline.bar=N=ao(ar.fn.sparkline._base,R,{type:"bar",init:function(aX,aW,aV,aU,aT){var aS=parseInt(aV.get("barWidth"),10),aR=parseInt(aV.get("barSpacing"),10),aQ=aV.get("chartRangeMin"),aP=aV.get("chartRangeMax"),aO=aV.get("chartRangeClip"),aN=Infinity,aM=-Infinity,aL,aK,aJ,aI,aH,aG,aF,aE,aD,aC,aB,aA,az,ay,ax,aw,av,au,at,y,t,m,l;N._super.init.call(this,aX,aW,aV,aU,aT);for(aG=0,aF=aW.length;aG<aF;aG++){y=aW[aG],aL=typeof y=="string"&&y.indexOf(":")>-1;if(aL||ar.isArray(y)){ax=!0,aL&&(y=aW[aG]=aj(y.split(":"))),y=ai(y,null),aK=d.min.apply(d,y),aJ=d.max.apply(d,y),aK<aN&&(aN=aK),aJ>aM&&(aM=aJ)}}this.stacked=ax,this.regionShapes={},this.barWidth=aS,this.barSpacing=aR,this.totalBarWidth=aS+aR,this.width=aU=aW.length*aS+(aW.length-1)*aR,this.initTarget(),aO&&(az=aQ===f?-Infinity:aQ,ay=aP===f?Infinity:aP),aH=[],aI=ax?[]:aH;var k=[],i=[];for(aG=0,aF=aW.length;aG<aF;aG++){if(ax){aw=aW[aG],aW[aG]=at=[],k[aG]=0,aI[aG]=i[aG]=0;for(av=0,au=aw.length;av<au;av++){y=at[av]=aO?am(aw[av],az,ay):aw[av],y!==null&&(y>0&&(k[aG]+=y),aN<0&&aM>0?y<0?i[aG]+=d.abs(y):aI[aG]+=y:aI[aG]+=d.abs(y-(y<0?aM:aN)),aH.push(y))}}else{y=aO?am(aW[aG],az,ay):aW[aG],y=aW[aG]=ak(y),y!==null&&aH.push(y)}}this.max=aA=d.max.apply(d,aH),this.min=aB=d.min.apply(d,aH),this.stackMax=aM=ax?d.max.apply(d,k):aA,this.stackMin=aN=ax?d.min.apply(d,aH):aB,aV.get("chartRangeMin")!==f&&(aV.get("chartRangeClip")||aV.get("chartRangeMin")<aB)&&(aB=aV.get("chartRangeMin")),aV.get("chartRangeMax")!==f&&(aV.get("chartRangeClip")||aV.get("chartRangeMax")>aA)&&(aA=aV.get("chartRangeMax")),this.zeroAxis=aD=aV.get("zeroAxis",!0),aB<=0&&aA>=0&&aD?aC=0:aD==0?aC=aB:aB>0?aC=aB:aC=aA,this.xaxisOffset=aC,aE=ax?d.max.apply(d,aI)+d.max.apply(d,i):aA-aB,this.canvasHeightEf=aD&&aB<0?this.canvasHeight-2:this.canvasHeight-1,aB<aC?(m=ax&&aA>=0?aM:aA,t=(m-aC)/aE*this.canvasHeight,t!==d.ceil(t)&&(this.canvasHeightEf-=2,t=d.ceil(t))):t=this.canvasHeight,this.yoffset=t,ar.isArray(aV.get("colorMap"))?(this.colorMapByIndex=aV.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=aV.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===f&&(this.colorMapByValue=new X(this.colorMapByValue))),this.range=aE},getRegion:function(g,j,i){var h=d.floor(j/this.totalBarWidth);return h<0||h>=this.values.length?f:h},getCurrentRegionFields:function(){var h=this.currentRegion,g=ab(this.values[h]),k=[],j,i;for(i=g.length;i--;){j=g[i],k.push({isNull:j===null,value:j,color:this.calcColor(i,j,h),offset:h})}return k},calcColor:function(l,k,r){var q=this.colorMapByIndex,p=this.colorMapByValue,o=this.options,n,m;return this.stacked?n=o.get("stackedBarColor"):n=k<0?o.get("negBarColor"):o.get("barColor"),k===0&&o.get("zeroColor")!==f&&(n=o.get("zeroColor")),p&&(m=p.get(k))?n=m:q&&q.length>r&&(n=q[r]),ar.isArray(n)?n[l%n.length]:n},renderRegion:function(aB,aA){var az=this.values[aB],ay=this.options,ax=this.xaxisOffset,aw=[],av=this.range,au=this.stacked,at=this.target,L=aB*this.totalBarWidth,K=this.canvasHeightEf,J=this.yoffset,I,H,G,F,E,D,C,B,A,o;az=ar.isArray(az)?az:[az],C=az.length,B=az[0],F=ag(null,az),o=ag(ax,az,!0);if(F){return ay.get("nullColor")?(G=aA?ay.get("nullColor"):this.calcHighlightColor(ay.get("nullColor"),ay),I=J>0?J-1:J,at.drawRect(L,I,this.barWidth-1,0,G,G)):f}E=J;for(D=0;D<C;D++){B=az[D];if(au&&B===ax){if(!o||A){continue}A=!0}av>0?H=d.floor(K*(d.abs(B-ax)/av))+1:H=1,B<ax||B===ax&&J===0?(I=E,E+=H):(I=J-H,J-=H),G=this.calcColor(D,B,aB),aA&&(G=this.calcHighlightColor(G,ay)),aw.push(at.drawRect(L,I,this.barWidth-1,H-1,G,G))}return aw.length===1?aw[0]:aw}}),ar.fn.sparkline.tristate=c=ao(ar.fn.sparkline._base,R,{type:"tristate",init:function(k,j,p,o,n){var m=parseInt(p.get("barWidth"),10),l=parseInt(p.get("barSpacing"),10);c._super.init.call(this,k,j,p,o,n),this.regionShapes={},this.barWidth=m,this.barSpacing=l,this.totalBarWidth=m+l,this.values=ar.map(j,Number),this.width=o=j.length*m+(j.length-1)*l,ar.isArray(p.get("colorMap"))?(this.colorMapByIndex=p.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=p.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===f&&(this.colorMapByValue=new X(this.colorMapByValue))),this.initTarget()},getRegion:function(g,i,h){return d.floor(i/this.totalBarWidth)},getCurrentRegionFields:function(){var g=this.currentRegion;return{isNull:this.values[g]===f,value:this.values[g],color:this.calcColor(this.values[g],g),offset:g}},calcColor:function(j,i){var p=this.values,o=this.options,n=this.colorMapByIndex,m=this.colorMapByValue,l,k;return m&&(k=m.get(j))?l=k:n&&n.length>i?l=n[i]:p[i]<0?l=o.get("negBarColor"):p[i]>0?l=o.get("posBarColor"):l=o.get("zeroBarColor"),l},renderRegion:function(w,v){var u=this.values,t=this.options,s=this.target,r,q,p,o,n,m;r=s.pixelHeight,p=d.round(r/2),o=w*this.totalBarWidth,u[w]<0?(n=p,q=p-1):u[w]>0?(n=0,q=p-1):(n=p-1,q=2),m=this.calcColor(u[w],w);if(m===null){return}return v&&(m=this.calcHighlightColor(m,t)),s.drawRect(o,n,this.barWidth-1,q-1,m,m)}}),ar.fn.sparkline.discrete=ae=ao(ar.fn.sparkline._base,R,{type:"discrete",init:function(i,m,l,k,j){ae._super.init.call(this,i,m,l,k,j),this.regionShapes={},this.values=m=ar.map(m,Number),this.min=d.min.apply(d,m),this.max=d.max.apply(d,m),this.range=this.max-this.min,this.width=k=l.get("width")==="auto"?m.length*2:this.width,this.interval=d.floor(k/m.length),this.itemWidth=k/m.length,l.get("chartRangeMin")!==f&&(l.get("chartRangeClip")||l.get("chartRangeMin")<this.min)&&(this.min=l.get("chartRangeMin")),l.get("chartRangeMax")!==f&&(l.get("chartRangeClip")||l.get("chartRangeMax")>this.max)&&(this.max=l.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight=l.get("lineHeight")==="auto"?d.round(this.canvasHeight*0.3):l.get("lineHeight"))},getRegion:function(g,i,h){return d.floor(i/this.itemWidth)},getCurrentRegionFields:function(){var g=this.currentRegion;return{isNull:this.values[g]===f,value:this.values[g],offset:g}},renderRegion:function(G,F){var E=this.values,D=this.options,C=this.min,B=this.max,A=this.range,z=this.interval,y=this.target,x=this.canvasHeight,w=this.lineHeight,v=x-w,u,t,s,i;return t=am(E[G],C,B),i=G*z,u=d.round(v-v*((t-C)/A)),s=D.get("thresholdColor")&&t<D.get("thresholdValue")?D.get("thresholdColor"):D.get("lineColor"),F&&(s=this.calcHighlightColor(s,D)),y.drawLine(i,u,i,u+w,s)}}),ar.fn.sparkline.bullet=ac=ao(ar.fn.sparkline._base,{type:"bullet",init:function(k,r,q,p,o){var n,m,l;ac._super.init.call(this,k,r,q,p,o),this.values=r=aj(r),l=r.slice(),l[0]=l[0]===null?l[2]:l[0],l[1]=r[1]===null?l[2]:l[1],n=d.min.apply(d,r),m=d.max.apply(d,r),q.get("base")===f?n=n<0?n:0:n=q.get("base"),this.min=n,this.max=m,this.range=m-n,this.shapes={},this.valueShapes={},this.regiondata={},this.width=p=q.get("width")==="auto"?"4.0em":p,this.target=this.$el.simpledraw(p,o,q.get("composite")),r.length||(this.disabled=!0),this.initTarget()},getRegion:function(h,g,j){var i=this.target.getShapeAt(h,g,j);return i!==f&&this.shapes[i]!==f?this.shapes[i]:f},getCurrentRegionFields:function(){var g=this.currentRegion;return{fieldkey:g.substr(0,1),value:this.values[g.substr(1)],region:g}},changeHighlight:function(h){var g=this.currentRegion,j=this.valueShapes[g],i;delete this.shapes[j];switch(g.substr(0,1)){case"r":i=this.renderRange(g.substr(1),h);break;case"p":i=this.renderPerformance(h);break;case"t":i=this.renderTarget(h)}this.valueShapes[g]=i.id,this.shapes[i.id]=g,this.target.replaceWithShape(j,i)},renderRange:function(g,k){var j=this.values[g],i=d.round(this.canvasWidth*((j-this.min)/this.range)),h=this.options.get("rangeColors")[g-2];return k&&(h=this.calcHighlightColor(h,this.options)),this.target.drawRect(0,0,i-1,this.canvasHeight-1,h,h)},renderPerformance:function(g){var j=this.values[1],i=d.round(this.canvasWidth*((j-this.min)/this.range)),h=this.options.get("performanceColor");return g&&(h=this.calcHighlightColor(h,this.options)),this.target.drawRect(0,d.round(this.canvasHeight*0.3),i-1,d.round(this.canvasHeight*0.4)-1,h,h)},renderTarget:function(h){var m=this.values[0],l=d.round(this.canvasWidth*((m-this.min)/this.range)-this.options.get("targetWidth")/2),k=d.round(this.canvasHeight*0.1),j=this.canvasHeight-k*2,i=this.options.get("targetColor");return h&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(l,k,this.options.get("targetWidth")-1,j-1,i,i)},render:function(){var h=this.values.length,g=this.target,j,i;if(!ac._super.render.call(this)){return}for(j=2;j<h;j++){i=this.renderRange(j).append(),this.shapes[i.id]="r"+j,this.valueShapes["r"+j]=i.id}this.values[1]!==null&&(i=this.renderPerformance().append(),this.shapes[i.id]="p1",this.valueShapes.p1=i.id),this.values[0]!==null&&(i=this.renderTarget().append(),this.shapes[i.id]="t0",this.valueShapes.t0=i.id),g.render()}}),ar.fn.sparkline.pie=aa=ao(ar.fn.sparkline._base,{type:"pie",init:function(j,p,o,n,m){var l=0,k;aa._super.init.call(this,j,p,o,n,m),this.shapes={},this.valueShapes={},this.values=p=ar.map(p,Number),o.get("width")==="auto"&&(this.width=this.height);if(p.length>0){for(k=p.length;k--;){l+=p[k]}}this.total=l,this.initTarget(),this.radius=d.floor(d.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(h,g,j){var i=this.target.getShapeAt(h,g,j);return i!==f&&this.shapes[i]!==f?this.shapes[i]:f},getCurrentRegionFields:function(){var g=this.currentRegion;return{isNull:this.values[g]===f,value:this.values[g],percent:this.values[g]/this.total*100,color:this.options.get("sliceColors")[g%this.options.get("sliceColors").length],offset:g}},changeHighlight:function(h){var g=this.currentRegion,j=this.renderSlice(g,h),i=this.valueShapes[g];delete this.shapes[i],this.target.replaceWithShape(i,j),this.valueShapes[g]=j.id,this.shapes[j.id]=g},renderSlice:function(H,G){var F=this.target,E=this.options,D=this.radius,C=E.get("borderWidth"),B=E.get("offset"),A=2*d.PI,z=this.values,y=this.total,x=B?2*d.PI*(B/360):0,w,v,u,t,s;t=z.length;for(u=0;u<t;u++){w=x,v=x,y>0&&(v=x+A*(z[u]/y));if(H===u){return s=E.get("sliceColors")[u%E.get("sliceColors").length],G&&(s=this.calcHighlightColor(s,E)),F.drawPieSlice(D,D,D-C,w,v,f,s)}x=v}},render:function(){var j=this.target,p=this.values,o=this.options,n=this.radius,m=o.get("borderWidth"),l,k;if(!aa._super.render.call(this)){return}m&&j.drawCircle(n,n,d.floor(n-m/2),o.get("borderColor"),f,m).append();for(k=p.length;k--;){p[k]&&(l=this.renderSlice(k).append(),this.valueShapes[k]=l.id,this.shapes[l.id]=k)}j.render()}}),ar.fn.sparkline.box=Y=ao(ar.fn.sparkline._base,{type:"box",init:function(h,g,k,j,i){Y._super.init.call(this,h,g,k,j,i),this.values=ar.map(g,Number),this.width=k.get("width")==="auto"?"4.0em":j,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var g=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==f&&g.push({field:"lo",value:this.loutlier}),this.routlier!==f&&g.push({field:"ro",value:this.routlier}),this.lwhisker!==f&&g.push({field:"lw",value:this.lwhisker}),this.rwhisker!==f&&g.push({field:"rw",value:this.rwhisker}),g},render:function(){var aw=this.target,av=this.values,au=av.length,at=this.options,L=this.canvasWidth,K=this.canvasHeight,J=at.get("chartRangeMin")===f?d.min.apply(d,av):at.get("chartRangeMin"),I=at.get("chartRangeMax")===f?d.max.apply(d,av):at.get("chartRangeMax"),H=0,G,F,E,D,C,B,A,z,y,x,j;if(!Y._super.render.call(this)){return}if(at.get("raw")){at.get("showOutliers")&&av.length>5?(F=av[0],G=av[1],D=av[2],C=av[3],B=av[4],A=av[5],z=av[6]):(G=av[0],D=av[1],C=av[2],B=av[3],A=av[4])}else{av.sort(function(h,g){return h-g}),D=al(av,1),C=al(av,2),B=al(av,3),E=B-D;if(at.get("showOutliers")){G=A=f;for(y=0;y<au;y++){G===f&&av[y]>D-E*at.get("outlierIQR")&&(G=av[y]),av[y]<B+E*at.get("outlierIQR")&&(A=av[y])}F=av[0],z=av[au-1]}else{G=av[0],A=av[au-1]}}this.quartiles=[D,C,B],this.lwhisker=G,this.rwhisker=A,this.loutlier=F,this.routlier=z,j=L/(I-J+1),at.get("showOutliers")&&(H=d.ceil(at.get("spotRadius")),L-=2*d.ceil(at.get("spotRadius")),j=L/(I-J+1),F<G&&aw.drawCircle((F-J)*j+H,K/2,at.get("spotRadius"),at.get("outlierLineColor"),at.get("outlierFillColor")).append(),z>A&&aw.drawCircle((z-J)*j+H,K/2,at.get("spotRadius"),at.get("outlierLineColor"),at.get("outlierFillColor")).append()),aw.drawRect(d.round((D-J)*j+H),d.round(K*0.1),d.round((B-D)*j),d.round(K*0.8),at.get("boxLineColor"),at.get("boxFillColor")).append(),aw.drawLine(d.round((G-J)*j+H),d.round(K/2),d.round((D-J)*j+H),d.round(K/2),at.get("lineColor")).append(),aw.drawLine(d.round((G-J)*j+H),d.round(K/4),d.round((G-J)*j+H),d.round(K-K/4),at.get("whiskerColor")).append(),aw.drawLine(d.round((A-J)*j+H),d.round(K/2),d.round((B-J)*j+H),d.round(K/2),at.get("lineColor")).append(),aw.drawLine(d.round((A-J)*j+H),d.round(K/4),d.round((A-J)*j+H),d.round(K-K/4),at.get("whiskerColor")).append(),aw.drawLine(d.round((C-J)*j+H),d.round(K*0.1),d.round((C-J)*j+H),d.round(K*0.9),at.get("medianColor")).append(),at.get("target")&&(x=d.ceil(at.get("spotRadius")),aw.drawLine(d.round((at.get("target")-J)*j+H),d.round(K/2-x),d.round((at.get("target")-J)*j+H),d.round(K/2+x),at.get("targetColor")).append(),aw.drawLine(d.round((at.get("target")-J)*j+H-x),d.round(K/2),d.round((at.get("target")-J)*j+H+x),d.round(K/2),at.get("targetColor")).append()),aw.render()}}),S=ao({init:function(h,g,j,i){this.target=h,this.id=g,this.type=j,this.args=i},append:function(){return this.target.appendShape(this),this}}),Q=ao({_pxregex:/(\d+)(px)?\s*$/i,init:function(h,g,i){if(!h){return}this.width=h,this.height=g,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),ar.data(i,"_jqs_vcanvas",this)},drawLine:function(h,g,l,k,j,i){return this.drawShape([[h,g],[l,k]],j,i)},drawShape:function(h,g,j,i){return this._genShape("Shape",[h,g,j,i])},drawCircle:function(h,g,l,k,j,i){return this._genShape("Circle",[h,g,l,k,j,i])},drawPieSlice:function(i,h,n,m,l,k,j){return this._genShape("PieSlice",[i,h,n,m,l,k,j])},drawRect:function(h,g,l,k,j,i){return this._genShape("Rect",[h,g,l,k,j,i])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(h,g){ar(g).html(h)},_calculatePixelDims:function(h,g,j){var i;i=this._pxregex.exec(g),i?this.pixelHeight=i[1]:this.pixelHeight=ar(j).height(),i=this._pxregex.exec(h),i?this.pixelWidth=i[1]:this.pixelWidth=ar(j).width()},_genShape:function(h,g){var i=a++;return g.unshift(i),new S(this,i,h,g)},appendShape:function(g){alert("appendShape not implemented")},replaceWithShape:function(h,g){alert("replaceWithShape not implemented")},insertAfterShape:function(h,g){alert("insertAfterShape not implemented")},removeShapeId:function(g){alert("removeShapeId not implemented")},getShapeAt:function(h,g,i){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),O=ao(Q,{init:function(h,k,j,i){O._super.init.call(this,h,k,j),this.canvas=e.createElement("canvas"),j[0]&&(j=j[0]),ar.data(j,"_jqs_vcanvas",this),ar(this.canvas).css({display:"inline-block",width:h,height:k,verticalAlign:"top"}),this._insert(this.canvas,j),this._calculatePixelDims(h,k,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=i,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=f,ar(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(h,g,j){var i=this.canvas.getContext("2d");return h!==f&&(i.strokeStyle=h),i.lineWidth=j===f?1:j,g!==f&&(i.fillStyle=g),i},reset:function(){var g=this._getContext();g.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=f},_drawShape:function(k,j,q,p,o){var n=this._getContext(q,p,o),m,l;n.beginPath(),n.moveTo(j[0][0]+0.5,j[0][1]+0.5);for(m=1,l=j.length;m<l;m++){n.lineTo(j[m][0]+0.5,j[m][1]+0.5)}q!==f&&n.stroke(),p!==f&&n.fill(),this.targetX!==f&&this.targetY!==f&&n.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=k)},_drawCircle:function(k,r,q,p,o,n,m){var l=this._getContext(o,n,m);l.beginPath(),l.arc(r,q,p,0,2*d.PI,!1),this.targetX!==f&&this.targetY!==f&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=k),o!==f&&l.stroke(),n!==f&&l.fill()},_drawPieSlice:function(s,r,q,p,o,n,m,l){var k=this._getContext(m,l);k.beginPath(),k.moveTo(r,q),k.arc(r,q,p,o,n,!1),k.lineTo(r,q),k.closePath(),m!==f&&k.stroke(),l&&k.fill(),this.targetX!==f&&this.targetY!==f&&k.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=s)},_drawRect:function(i,h,n,m,l,k,j){return this._drawShape(i,[[h,n],[h+m,n],[h+m,n+l],[h,n+l],[h,n]],k,j)},appendShape:function(g){return this.shapes[g.id]=g,this.shapeseq.push(g.id),this.lastShapeId=g.id,g.id},replaceWithShape:function(h,g){var j=this.shapeseq,i;this.shapes[g.id]=g;for(i=j.length;i--;){j[i]==h&&(j[i]=g.id)}delete this.shapes[h]},replaceWithShapes:function(i,h){var n=this.shapeseq,m={},l,k,j;for(k=i.length;k--;){m[i[k]]=!0}for(k=n.length;k--;){l=n[k],m[l]&&(n.splice(k,1),delete this.shapes[l],j=k)}for(k=h.length;k--;){n.splice(j,0,h[k].id),this.shapes[h[k].id]=h[k]}},insertAfterShape:function(h,g){var j=this.shapeseq,i;for(i=j.length;i--;){if(j[i]===h){j.splice(i+1,0,g.id),this.shapes[g.id]=g;return}}},removeShapeId:function(h){var g=this.shapeseq,i;for(i=g.length;i--;){if(g[i]===h){g.splice(i,1);break}}delete this.shapes[h]},getShapeAt:function(h,g,i){return this.targetX=g,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var i=this.shapeseq,h=this.shapes,n=i.length,m=this._getContext(),l,k,j;m.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(j=0;j<n;j++){l=i[j],k=h[l],this["_draw"+k.type].apply(this,k.args)}this.interact||(this.shapes={},this.shapeseq=[])}}),M=ao(Q,{init:function(g,j,i){var h;M._super.init.call(this,g,j,i),i[0]&&(i=i[0]),ar.data(i,"_jqs_vcanvas",this),this.canvas=e.createElement("span"),ar(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:g,height:j,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(g,j,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,h='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",h),this.group=ar(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(A,z,y,x,w){var v=[],u,t,s,r,q,p,o;for(o=0,p=z.length;o<p;o++){v[o]=""+z[o][0]+","+z[o][1]}return u=v.splice(0,1),w=w===f?1:w,t=y===f?' stroked="false" ':' strokeWeight="'+w+'px" strokeColor="'+y+'" ',s=x===f?' filled="false"':' fillColor="'+x+'" filled="true" ',r=v[0]===v[v.length-1]?"x ":"",q='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+A+'" '+t+s+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+u+" l "+v.join(", ")+" "+r+'e"> </v:shape>',q},_drawCircle:function(u,t,s,r,q,p,o){var n,m,l;return t-=r,s-=r,n=q===f?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+q+'" ',m=p===f?' filled="false"':' fillColor="'+p+'" filled="true" ',l='<v:oval  id="jqsshape'+u+'" '+n+m+' style="position:absolute;top:'+s+"px; left:"+t+"px; width:"+r*2+"px; height:"+r*2+'px"></v:oval>',l},_drawPieSlice:function(H,G,F,E,D,C,B,A){var z,y,x,w,v,u,t,s;if(D===C){return""}C-D===2*d.PI&&(D=0,C=2*d.PI),y=G+d.round(d.cos(D)*E),x=F+d.round(d.sin(D)*E),w=G+d.round(d.cos(C)*E),v=F+d.round(d.sin(C)*E);if(y===w&&x===v){if(C-D<d.PI){return""}y=w=G+E,x=v=F}return y===w&&x===v&&C-D<d.PI?"":(z=[G-E,F-E,G+E,F+E,y,x,w,v],u=B===f?' stroked="false" ':' strokeWeight="1px" strokeColor="'+B+'" ',t=A===f?' filled="false"':' fillColor="'+A+'" filled="true" ',s='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+H+'" '+u+t+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+G+","+F+" wa "+z.join(", ")+' x e"> </v:shape>',s)},_drawRect:function(i,h,n,m,l,k,j){return this._drawShape(i,[[h,n],[h,n+l],[h+m,n+l],[h+m,n],[h,n]],k,j)},reset:function(){this.group.innerHTML=""},appendShape:function(h){var g=this["_draw"+h.type].apply(this,h.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",g):this.prerender+=g,this.lastShapeId=h.id,h.id},replaceWithShape:function(h,g){var j=ar("#jqsshape"+h),i=this["_draw"+g.type].apply(this,g.args);j[0].outerHTML=i},replaceWithShapes:function(i,h){var m=ar("#jqsshape"+i[0]),l="",k=h.length,j;for(j=0;j<k;j++){l+=this["_draw"+h[j].type].apply(this,h[j].args)}m[0].outerHTML=l;for(j=1;j<i.length;j++){ar("#jqsshape"+i[j]).remove()}},insertAfterShape:function(h,g){var j=ar("#jqsshape"+h),i=this["_draw"+g.type].apply(this,g.args);j[0].insertAdjacentHTML("afterEnd",i)},removeShapeId:function(h){var g=ar("#jqsshape"+h);this.group.removeChild(g[0])},getShapeAt:function(h,g,j){var i=h.id.substr(8);return i},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})})(document,Math);
/*!
 * Jasny Bootstrap v3.1.3 (http://jasny.github.io/bootstrap)
 * Copyright 2012-2014 Arnold Daniels
 * Licensed under Apache-2.0 (https://github.com/jasny/bootstrap/blob/master/LICENSE)
 */
;if("undefined"==typeof jQuery){throw new Error("Jasny Bootstrap's JavaScript requires jQuery")}+function(d){function c(){var f=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var g in e){if(void 0!==f.style[g]){return{end:e[g]}}}return !1}void 0===d.support.transition&&(d.fn.emulateTransitionEnd=function(a){var h=!1,g=this;d(this).one(d.support.transition.end,function(){h=!0});var f=function(){h||d(g).trigger(d.support.transition.end)};return setTimeout(f,a),this},d(function(){d.support.transition=c()}))}(window.jQuery),+function(e){var d=function(b,a){this.$element=e(b),this.options=e.extend({},d.DEFAULTS,a),this.state=null,this.placement=null,this.options.recalc&&(this.calcClone(),e(window).on("resize",e.proxy(this.recalc,this))),this.options.autohide&&e(document).on("click",e.proxy(this.autohide,this)),this.options.toggle&&this.toggle(),this.options.disablescrolling&&(this.options.disableScrolling=this.options.disablescrolling,delete this.options.disablescrolling)};d.DEFAULTS={toggle:!0,placement:"auto",autohide:!0,recalc:!0,disableScrolling:!0},d.prototype.offset=function(){switch(this.placement){case"left":case"right":return this.$element.outerWidth();case"top":case"bottom":return this.$element.outerHeight()}},d.prototype.calcPlacement=function(){function a(k,j){if("auto"===g.css(j)){return k}if("auto"===g.css(k)){return j}var m=parseInt(g.css(k),10),l=parseInt(g.css(j),10);return m>l?j:k}if("auto"!==this.options.placement){return void (this.placement=this.options.placement)}this.$element.hasClass("in")||this.$element.css("visiblity","hidden !important").addClass("in");var i=e(window).width()/this.$element.width(),h=e(window).height()/this.$element.height(),g=this.$element;this.placement=i>=h?a("left","right"):a("top","bottom"),"hidden !important"===this.$element.css("visibility")&&this.$element.removeClass("in").css("visiblity","")},d.prototype.opposite=function(b){switch(b){case"top":return"bottom";case"left":return"right";case"bottom":return"top";case"right":return"left"}},d.prototype.getCanvasElements=function(){var a=this.options.canvas?e(this.options.canvas):this.$element,g=a.find("*").filter(function(){return"fixed"===e(this).css("position")}).not(this.options.exclude);return a.add(g)},d.prototype.slide=function(a,l,k){if(!e.support.transition){var j={};return j[this.placement]="+="+l,a.animate(j,350,k)}var i=this.placement,h=this.opposite(i);a.each(function(){"auto"!==e(this).css(i)&&e(this).css(i,(parseInt(e(this).css(i),10)||0)+l),"auto"!==e(this).css(h)&&e(this).css(h,(parseInt(e(this).css(h),10)||0)-l)}),this.$element.one(e.support.transition.end,k).emulateTransitionEnd(350)},d.prototype.disableScrolling=function(){var a=e("body").width(),h="padding-"+this.opposite(this.placement);if(void 0===e("body").data("offcanvas-style")&&e("body").data("offcanvas-style",e("body").attr("style")||""),e("body").css("overflow","hidden"),e("body").width()>a){var g=parseInt(e("body").css(h),10)+e("body").width()-a;setTimeout(function(){e("body").css(h,g)},1)}},d.prototype.show=function(){if(!this.state){var a=e.Event("show.bs.offcanvas");if(this.$element.trigger(a),!a.isDefaultPrevented()){this.state="slide-in",this.calcPlacement();var l=this.getCanvasElements(),k=this.placement,j=this.opposite(k),i=this.offset();-1!==l.index(this.$element)&&(e(this.$element).data("offcanvas-style",e(this.$element).attr("style")||""),this.$element.css(k,-1*i),this.$element.css(k)),l.addClass("canvas-sliding").each(function(){void 0===e(this).data("offcanvas-style")&&e(this).data("offcanvas-style",e(this).attr("style")||""),"static"===e(this).css("position")&&e(this).css("position","relative"),"auto"!==e(this).css(k)&&"0px"!==e(this).css(k)||"auto"!==e(this).css(j)&&"0px"!==e(this).css(j)||e(this).css(k,0)}),this.options.disableScrolling&&this.disableScrolling();var h=function(){"slide-in"==this.state&&(this.state="slid",l.removeClass("canvas-sliding").addClass("canvas-slid"),this.$element.trigger("shown.bs.offcanvas"))};setTimeout(e.proxy(function(){this.$element.addClass("in"),this.slide(l,i,e.proxy(h,this))},this),1)}}},d.prototype.hide=function(){if("slid"===this.state){var a=e.Event("hide.bs.offcanvas");if(this.$element.trigger(a),!a.isDefaultPrevented()){this.state="slide-out";var i=e(".canvas-slid"),h=(this.placement,-1*this.offset()),g=function(){"slide-out"==this.state&&(this.state=null,this.placement=null,this.$element.removeClass("in"),i.removeClass("canvas-sliding"),i.add(this.$element).add("body").each(function(){e(this).attr("style",e(this).data("offcanvas-style")).removeData("offcanvas-style")}),this.$element.trigger("hidden.bs.offcanvas"))};i.removeClass("canvas-slid").addClass("canvas-sliding"),setTimeout(e.proxy(function(){this.slide(i,h,e.proxy(g,this))},this),1)}}},d.prototype.toggle=function(){"slide-in"!==this.state&&"slide-out"!==this.state&&this["slid"===this.state?"hide":"show"]()},d.prototype.calcClone=function(){this.$calcClone=this.$element.clone().html("").addClass("offcanvas-clone").removeClass("in").appendTo(e("body"))},d.prototype.recalc=function(){if("none"!==this.$calcClone.css("display")&&("slid"===this.state||"slide-in"===this.state)){this.state=null,this.placement=null;var a=this.getCanvasElements();this.$element.removeClass("in"),a.removeClass("canvas-slid"),a.add(this.$element).add("body").each(function(){e(this).attr("style",e(this).data("offcanvas-style")).removeData("offcanvas-style")})}},d.prototype.autohide=function(a){0===e(a.target).closest(this.$element).length&&this.hide()};var f=e.fn.offcanvas;e.fn.offcanvas=function(a){return this.each(function(){var g=e(this),c=g.data("bs.offcanvas"),b=e.extend({},d.DEFAULTS,g.data(),"object"==typeof a&&a);c||g.data("bs.offcanvas",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.offcanvas.Constructor=d,e.fn.offcanvas.noConflict=function(){return e.fn.offcanvas=f,this},e(document).on("click.bs.offcanvas.data-api","[data-toggle=offcanvas]",function(a){var n,m=e(this),l=m.attr("data-target")||a.preventDefault()||(n=m.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),k=e(l),j=k.data("bs.offcanvas"),i=j?"toggle":m.data();a.stopPropagation(),j?j.toggle():k.offcanvas(i)})}(window.jQuery),+function(e){var d=function(b,a){this.$element=e(b),this.options=e.extend({},d.DEFAULTS,a),this.$element.on("click.bs.rowlink","td:not(.rowlink-skip)",e.proxy(this.click,this))};d.DEFAULTS={target:"a"},d.prototype.click=function(a){var h=e(a.currentTarget).closest("tr").find(this.options.target)[0];if(e(a.target)[0]!==h){if(a.preventDefault(),h.click){h.click()}else{if(document.createEvent){var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),h.dispatchEvent(g)}}}};var f=e.fn.rowlink;e.fn.rowlink=function(a){return this.each(function(){var c=e(this),b=c.data("bs.rowlink");b||c.data("bs.rowlink",b=new d(this,a))})},e.fn.rowlink.Constructor=d,e.fn.rowlink.noConflict=function(){return e.fn.rowlink=f,this},e(document).on("click.bs.rowlink.data-api",'[data-link="row"]',function(a){if(0===e(a.target).closest(".rowlink-skip").length){var g=e(this);g.data("bs.rowlink")||(g.rowlink(g.data()),e(a.target).trigger("click.bs.rowlink"))}})}(window.jQuery),+function(h){var g=void 0!==window.orientation,l=navigator.userAgent.toLowerCase().indexOf("android")>-1,k="Microsoft Internet Explorer"==window.navigator.appName,j=function(a,c){l||(this.$element=h(a),this.options=h.extend({},j.DEFAULTS,c),this.mask=String(this.options.mask),this.init(),this.listen(),this.checkVal())};j.DEFAULTS={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]",w:"[A-Za-z0-9]","*":"."}},j.prototype.init=function(){var a=this.options.definitions,d=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,h.each(this.mask.split(""),h.proxy(function(b,c){"?"==c?(d--,this.partialPosition=b):a[c]?(this.tests.push(new RegExp(a[c])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=h.map(this.mask.split(""),h.proxy(function(b){return"?"!=b?a[b]?this.options.placeholder:b:void 0},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",h.proxy(function(){return h.map(this.buffer,function(e,c){return this.tests[c]&&e!=this.options.placeholder?e:null}).join("")},this))},j.prototype.listen=function(){if(!this.$element.attr("readonly")){var a=(k?"paste":"input")+".mask";this.$element.on("unmask.bs.inputmask",h.proxy(this.unmask,this)).on("focus.bs.inputmask",h.proxy(this.focusEvent,this)).on("blur.bs.inputmask",h.proxy(this.blurEvent,this)).on("keydown.bs.inputmask",h.proxy(this.keydownEvent,this)).on("keypress.bs.inputmask",h.proxy(this.keypressEvent,this)).on(a,h.proxy(this.pasteEvent,this))}},j.prototype.caret=function(e,d){if(0!==this.$element.length){if("number"==typeof e){return d="number"==typeof d?d:e,this.$element.each(function(){if(this.setSelectionRange){this.setSelectionRange(e,d)}else{if(this.createTextRange){var a=this.createTextRange();a.collapse(!0),a.moveEnd("character",d),a.moveStart("character",e),a.select()}}})}if(this.$element[0].setSelectionRange){e=this.$element[0].selectionStart,d=this.$element[0].selectionEnd}else{if(document.selection&&document.selection.createRange){var f=document.selection.createRange();e=0-f.duplicate().moveStart("character",-100000),d=e+f.text.length}}return{begin:e,end:d}}},j.prototype.seekNext=function(d){for(var c=this.mask.length;++d<=c&&!this.tests[d];){}return d},j.prototype.seekPrev=function(b){for(;--b>=0&&!this.tests[b];){}return b},j.prototype.shiftL=function(m,f){var p=this.mask.length;if(!(0>m)){for(var o=m,n=this.seekNext(f);p>o;o++){if(this.tests[o]){if(!(p>n&&this.tests[o].test(this.buffer[n]))){break}this.buffer[o]=this.buffer[n],this.buffer[n]=this.options.placeholder,n=this.seekNext(n)}}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,m))}},j.prototype.shiftR=function(n){for(var m=this.mask.length,r=n,q=this.options.placeholder;m>r;r++){if(this.tests[r]){var p=this.seekNext(r),o=this.buffer[r];if(this.buffer[r]=q,!(m>p&&this.tests[p].test(o))){break}q=o}}},j.prototype.unmask=function(){this.$element.unbind(".mask").removeData("inputmask")},j.prototype.focusEvent=function(){this.focusText=this.$element.val();var f=this.mask.length,e=this.checkVal();this.writeBuffer();var n=this,m=function(){e==f?n.caret(0,e):n.caret(e)};m(),setTimeout(m,50)},j.prototype.blurEvent=function(){this.checkVal(),this.$element.val()!==this.focusText&&this.$element.trigger("change")},j.prototype.keydownEvent=function(b){var p=b.which;if(8==p||46==p||g&&127==p){var o=this.caret(),n=o.begin,m=o.end;return m-n===0&&(n=46!=p?this.seekPrev(n):m=this.seekNext(n-1),m=46==p?this.seekNext(m):m),this.clearBuffer(n,m),this.shiftL(n,m-1),!1}return 27==p?(this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1):void 0},j.prototype.keypressEvent=function(n){var m=this.mask.length,s=n.which,r=this.caret();if(n.ctrlKey||n.altKey||n.metaKey||32>s){return !0}if(s){r.end-r.begin!==0&&(this.clearBuffer(r.begin,r.end),this.shiftL(r.begin,r.end-1));var q=this.seekNext(r.begin-1);if(m>q){var p=String.fromCharCode(s);if(this.tests[q].test(p)){this.shiftR(q),this.buffer[q]=p,this.writeBuffer();var o=this.seekNext(q);this.caret(o)}}return !1}},j.prototype.pasteEvent=function(){var b=this;setTimeout(function(){b.caret(b.checkVal(!0))},0)},j.prototype.clearBuffer=function(f,e){for(var n=this.mask.length,m=f;e>m&&n>m;m++){this.tests[m]&&(this.buffer[m]=this.options.placeholder)}},j.prototype.writeBuffer=function(){return this.$element.val(this.buffer.join("")).val()},j.prototype.checkVal=function(n){for(var m=this.mask.length,s=this.$element.val(),r=-1,q=0,p=0;m>q;q++){if(this.tests[q]){for(this.buffer[q]=this.options.placeholder;p++<s.length;){var o=s.charAt(p-1);if(this.tests[q].test(o)){this.buffer[q]=o,r=q;break}}if(p>s.length){break}}else{this.buffer[q]==s.charAt(p)&&q!=this.partialPosition&&(p++,r=q)}}return !n&&r+1<this.partialPosition?(this.$element.val(""),this.clearBuffer(0,m)):(n||r+1>=this.partialPosition)&&(this.writeBuffer(),n||this.$element.val(this.$element.val().substring(0,r+1))),this.partialPosition?q:this.firstNonMaskPos};var i=h.fn.inputmask;h.fn.inputmask=function(a){return this.each(function(){var e=h(this),b=e.data("bs.inputmask");b||e.data("bs.inputmask",b=new j(this,a))})},h.fn.inputmask.Constructor=j,h.fn.inputmask.noConflict=function(){return h.fn.inputmask=i,this},h(document).on("focus.bs.inputmask.data-api","[data-mask]",function(){var a=h(this);a.data("bs.inputmask")||a.inputmask(a.data())})}(window.jQuery),+function(f){var e="Microsoft Internet Explorer"==window.navigator.appName,h=function(a,j){if(this.$element=f(a),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||j.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=f('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview");var i=this.$preview.css("height");"inline"!==this.$preview.css("display")&&"0px"!==i&&"none"!==i&&this.$preview.css("line-height",i),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()}};h.prototype.listen=function(){this.$input.on("change.bs.fileinput",f.proxy(this.change,this)),f(this.$input[0].form).on("reset.bs.fileinput",f.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",f.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",f.proxy(this.clear,this))},h.prototype.change=function(a){var m=void 0===a.target.files?a.target&&a.target.value?[{name:a.target.value.replace(/^.+\\/,"")}]:[]:a.target.files;if(a.stopPropagation(),0===m.length){return void this.clear()}this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var l=m[0];if(this.$preview.length>0&&("undefined"!=typeof l.type?l.type.match(/^image\/(gif|png|jpeg)$/):l.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var k=new FileReader,j=this.$preview,i=this.$element;k.onload=function(c){var d=f("<img>");d[0].src=c.target.result,m[0].result=c.target.result,i.find(".fileinput-filename").text(l.name),"none"!=j.css("max-height")&&d.css("max-height",parseInt(j.css("max-height"),10)-parseInt(j.css("padding-top"),10)-parseInt(j.css("padding-bottom"),10)-parseInt(j.css("border-top"),10)-parseInt(j.css("border-bottom"),10)),j.html(d),i.addClass("fileinput-exists").removeClass("fileinput-new"),i.trigger("change.bs.fileinput",m)},k.readAsDataURL(l)}else{this.$element.find(".fileinput-filename").text(l.name),this.$preview.text(l.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")}},h.prototype.clear=function(b){if(b&&b.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),e){var d=this.$input.clone(!0);this.$input.after(d),this.$input.remove(),this.$input=d}else{this.$input.val("")}this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),void 0!==b&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},h.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},h.prototype.trigger=function(b){this.$input.trigger("click"),b.preventDefault()};var g=f.fn.fileinput;f.fn.fileinput=function(a){return this.each(function(){var c=f(this),b=c.data("bs.fileinput");b||c.data("bs.fileinput",b=new h(this,a)),"string"==typeof a&&b[a]()})},f.fn.fileinput.Constructor=h,f.fn.fileinput.noConflict=function(){return f.fn.fileinput=g,this},f(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(a){var j=f(this);if(!j.data("bs.fileinput")){j.fileinput(j.data());var i=f(a.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');i.length>0&&(a.preventDefault(),i.trigger("click.bs.fileinput"))}})}(window.jQuery);