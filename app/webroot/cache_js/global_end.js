var Layout=function(){var f=Metronic.getAssetsPath()+"admin/layout3/img/";var b=Metronic.getAssetsPath()+"admin/layout3/css/";var d=function(){$(".page-header").on("click",".search-form",function(h){$(this).addClass("open");$(this).find(".form-control").focus();$(".page-header .search-form .form-control").on("blur",function(i){$(this).closest(".search-form").removeClass("open");$(this).unbind("blur")})});$(".page-header").on("keypress",".hor-menu .search-form .form-control",function(h){if(h.which==13){$(this).closest(".search-form").submit();return false}});$(".page-header").on("mousedown",".search-form.open .submit",function(h){h.preventDefault();h.stopPropagation();$(this).closest(".search-form").submit()});$(document).on("click",".mega-menu-dropdown .dropdown-menu",function(h){h.stopPropagation()})};var e=function(){$(".page-header .menu-toggler").on("click",function(h){if(Metronic.getViewPort().width<992){var i=$(".page-header .page-header-menu");if(i.hasClass("page-header-menu-opened")){i.slideUp(300);i.removeClass("page-header-menu-opened")}else{i.slideDown(300);i.addClass("page-header-menu-opened")}}});$(".dropdown-submenu > a").on("click",function(h){if(Metronic.getViewPort().width<992){if($(this).next().hasClass("dropdown-menu")){h.stopPropagation();if($(this).parent().hasClass("open")){$(this).parent().removeClass("open");$(this).next().hide()}else{$(this).parent().addClass("open");$(this).next().show()}}}});if(Metronic.getViewPort().width>=992){$('[data-hover="megamenu-dropdown"]').not(".hover-initialized").each(function(){$(this).dropdownHover();$(this).addClass("hover-initialized")})}$(window).scroll(function(){var h=75;if($("body").hasClass("page-header-menu-fixed")){if($(window).scrollTop()>h){$(".page-header-menu").addClass("fixed")}else{$(".page-header-menu").removeClass("fixed")}}if($("body").hasClass("page-header-top-fixed")){if($(window).scrollTop()>h){$(".page-header-top").addClass("fixed")}else{$(".page-header-top").removeClass("fixed")}}})};var c=function(){if(Metronic.getViewPort().width>=992){$('.hor-menu [data-hover="megamenu-dropdown"]').not(".hover-initialized").each(function(){$(this).dropdownHover();$(this).addClass("hover-initialized")});$(".hor-menu .navbar-nav li.open").removeClass("open")}else{$('.hor-menu [data-hover="megamenu-dropdown"].hover-initialized').each(function(){$(this).unbind("hover");$(this).parent().unbind("hover").find(".dropdown-submenu").each(function(){$(this).unbind("hover")});$(this).removeClass("hover-initialized")})}};var a=function(){var h;if($("body").height()<Metronic.getViewPort().height){h=Metronic.getViewPort().height-$(".page-header").outerHeight()-($(".page-container").outerHeight()-$(".page-content").outerHeight())-$(".page-prefooter").outerHeight()-$(".page-footer").outerHeight();$(".page-content").css("min-height",h)}};var g=function(){var i=100;var h=500;if(navigator.userAgent.match(/iPhone|iPad|iPod/i)){$(window).bind("touchend touchcancel touchleave",function(j){if($(this).scrollTop()>i){$(".scroll-to-top").fadeIn(h)}else{$(".scroll-to-top").fadeOut(h)}})}else{$(window).scroll(function(){if($(this).scrollTop()>i){$(".scroll-to-top").fadeIn(h)}else{$(".scroll-to-top").fadeOut(h)}})}$(".scroll-to-top").click(function(j){j.preventDefault();$("html, body").animate({scrollTop:0},h);return false})};return{init:function(){a();d();g();e();Metronic.addResizeHandler(c)},getLayoutImgPath:function(){return f},getLayoutCssPath:function(){return b}}}();var Demo=function(){var a=function(){var b=$(".theme-panel");if($(".page-head > .container-fluid").size()===1){$(".theme-setting-layout",b).val("fluid")}else{$(".theme-setting-layout",b).val("boxed")}if($(".top-menu li.dropdown.dropdown-dark").size()>0){$(".theme-setting-top-menu-style",b).val("dark")}else{$(".theme-setting-top-menu-style",b).val("light")}if($("body").hasClass("page-header-top-fixed")){$(".theme-setting-top-menu-mode",b).val("fixed")}else{$(".theme-setting-top-menu-mode",b).val("not-fixed")}if($(".hor-menu.hor-menu-light").size()>0){$(".theme-setting-mega-menu-style",b).val("light")}else{$(".theme-setting-mega-menu-style",b).val("dark")}if($("body").hasClass("page-header-menu-fixed")){$(".theme-setting-mega-menu-mode",b).val("fixed")}else{$(".theme-setting-mega-menu-mode",b).val("not-fixed")}var d=function(){$("body").removeClass("page-header-top-fixed").removeClass("page-header-menu-fixed");$(".page-header-top > .container-fluid").removeClass("container-fluid").addClass("container");$(".page-header-menu > .container-fluid").removeClass("container-fluid").addClass("container");$(".page-head > .container-fluid").removeClass("container-fluid").addClass("container");$(".page-content > .container-fluid").removeClass("container-fluid").addClass("container");$(".page-prefooter > .container-fluid").removeClass("container-fluid").addClass("container");$(".page-footer > .container-fluid").removeClass("container-fluid").addClass("container")};var e=function(){var j=$(".theme-setting-layout",b).val();var i=$(".theme-setting-top-menu-style",b).val();var g=$(".theme-setting-top-menu-mode",b).val();var f=$(".theme-setting-mega-menu-style",b).val();var h=$(".theme-setting-mega-menu-mode",b).val();d();if(j==="fluid"){$(".page-header-top > .container").removeClass("container").addClass("container-fluid");$(".page-header-menu > .container").removeClass("container").addClass("container-fluid");$(".page-head > .container").removeClass("container").addClass("container-fluid");$(".page-content > .container").removeClass("container").addClass("container-fluid");$(".page-prefooter > .container").removeClass("container").addClass("container-fluid");$(".page-footer > .container").removeClass("container").addClass("container-fluid")}if(i==="dark"){$(".top-menu > .navbar-nav > li.dropdown").addClass("dropdown-dark")}else{$(".top-menu > .navbar-nav > li.dropdown").removeClass("dropdown-dark")}if(g==="fixed"){$("body").addClass("page-header-top-fixed")}else{$("body").removeClass("page-header-top-fixed")}if(f==="light"){$(".hor-menu").addClass("hor-menu-light")}else{$(".hor-menu").removeClass("hor-menu-light")}if(h==="fixed"){$("body").addClass("page-header-menu-fixed")}else{$("body").removeClass("page-header-menu-fixed")}};var c=function(f){var g=(Metronic.isRTL()?f+"-rtl":f);$("#style_color").attr("href",Layout.getLayoutCssPath()+"themes/"+g+".css");$(".page-logo img").attr("src",Layout.getLayoutImgPath()+"logo-"+f+".png")};$(".theme-colors > li",b).click(function(){var f=$(this).attr("data-theme");c(f);$(".theme-colors > li",b).removeClass("active");$(this).addClass("active")});$(".theme-setting-top-menu-mode",b).change(function(){var f=$(".theme-setting-top-menu-mode",b).val();var g=$(".theme-setting-mega-menu-mode",b).val();if(g==="fixed"){alert("The top menu and mega menu can not be fixed at the same time.");$(".theme-setting-mega-menu-mode",b).val("not-fixed");f="not-fixed"}});$(".theme-setting-mega-menu-mode",b).change(function(){var f=$(".theme-setting-top-menu-mode",b).val();var g=$(".theme-setting-mega-menu-mode",b).val();if(f==="fixed"){alert("The top menu and mega menu can not be fixed at the same time.");$(".theme-setting-top-menu-mode",b).val("not-fixed");f="not-fixed"}});$(".theme-setting",b).change(e);$(".theme-setting-layout",b).change(function(){Index.redrawCharts()})};return{init:function(){a()}}}();var Login=function(){var d=function(){$(".login-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:false,rules:{"data[User][username]":{required:true},"data[User][password]":{required:true},remember:{required:false}},messages:{"data[User][username]":{required:"Username is required."},"data[User][password]":{required:"Password is required."}},invalidHandler:function(f,e){$(".alert-danger",$(".login-form")).show()},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error");e.remove()},errorPlacement:function(e,f){e.insertAfter(f.closest(".input-icon"))},submitHandler:function(e){e.submit()}});$(".login-form input").keypress(function(f){if(f.which==13){if($(".login-form").validate().form()){$(".login-form").submit()}return false}})};var b=function(){$(".forget-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:false,ignore:"",rules:{email:{required:true,email:true}},messages:{email:{required:"Email is required."}},invalidHandler:function(f,e){},highlight:function(e){$(e).closest(".form-group").addClass("has-error");alert(1)},success:function(e){e.closest(".form-group").removeClass("has-error");e.remove();alert(2)},errorPlacement:function(e,f){e.insertAfter(f.closest(".input-icon"))},submitHandler:function(e){e.submit()}});$(".forget-form input").keypress(function(f){if(f.which==13){if($(".forget-form").validate().form()){$(".forget-form").submit()}return false}});jQuery("#forget-password").click(function(){jQuery(".login-form").hide();jQuery(".forget-form").show()});jQuery("#back-btn").click(function(){jQuery(".login-form").show();jQuery(".forget-form").hide()})};var c=function(){function e(f){if(!f.id){return f.text}return"<img class='flag' src='../../assets/global/img/flags/"+f.id.toLowerCase()+".png'/>&nbsp;&nbsp;"+f.text}$("#select2_sample4").select2({placeholder:'<i class="fa fa-map-marker"></i>&nbsp;Select a Country',allowClear:true,formatResult:e,formatSelection:e,escapeMarkup:function(f){return f}});$("#select2_sample4").change(function(){$(".register-form").validate().element($(this))});$(".register-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:false,ignore:"",rules:{fullname:{required:true},"data[User][email]":{required:true,email:true},address:{required:true},city:{required:true},country:{required:true},"data[User][username]":{required:true},"data[User][password]":{required:true},rpassword:{equalTo:"#UserPassword2"},tnc:{required:true}},messages:{tnc:{required:"Please accept TNC first."}},invalidHandler:function(g,f){},highlight:function(f){$(f).closest(".form-group").addClass("has-error")},success:function(f){f.closest(".form-group").removeClass("has-error");f.remove()},errorPlacement:function(f,g){if(g.attr("name")=="tnc"){f.insertAfter($("#register_tnc_error"))}else{if(g.closest(".input-icon").size()===1){f.insertAfter(g.closest(".input-icon"))}else{f.insertAfter(g)}}},submitHandler:function(f){f.submit()}});$(".register-form input").keypress(function(f){if(f.which==13){if($(".register-form").validate().form()){$(".register-form").submit()}return false}});jQuery("#register-btn").click(function(){jQuery(".login-form").hide();jQuery(".register-form").show()});jQuery("#register-back-btn").click(function(){jQuery(".login-form").show();jQuery(".register-form").hide()})};var a=function(){$("#UserUsername2").change(function(){var e=$(this);if(e.val()===""){return}e.attr("readonly",true).attr("disabled",true).addClass("spinner");$.post("http://localhost/omo/users/check_username",{username:e.val()},function(f){e.attr("readonly",false).attr("disabled",false).removeClass("spinner");if(f.status=="OK"){e.closest(".form-group").removeClass("has-error").addClass("has-success");$(".icon-exclamation-sign",e.closest(".form-group")).remove();e.before('<i class="icon-ok"></i>');e.data("bs.popover").tip().removeClass("error").addClass("success")}else{e.closest(".form-group").removeClass("has-success").addClass("has-error");$(".icon-ok",e.closest(".form-group")).remove();e.before('<i class="icon-exclamation-sign"></i>');e.popover("destroy");e.popover({html:true,placement:(Metronic.isRTL()?"left":"right"),container:"body",content:f.message});e.popover("show");e.data("bs.popover").tip().removeClass("success").addClass("error");e.val("");Metronic.setLastPopedPopover(e)}},"json")})};return{init:function(){d();b();c();a()}}}();(function(a){a.fn.tabs=function(c){var f={direction:""};var c=a.extend({},f,c);if(c.direction=="vertical"){a(this).addClass("tabs-vertical")}var e=a(this).find(" > ul"),b=e.find("li.active").index(),d=a(this).find(".tabs-pane");d.find(".tab-panel").fadeOut();d.find(".tab-panel").eq(b).fadeIn();e.find("li").find("a").click(function(h){if(!a(this).parent().hasClass("active")){h.preventDefault();var g=a(this).parent().index();e.find("li").removeClass("active");a(this).parent().addClass("active");d.find(".tab-panel").fadeOut(0).removeClass("active");d.find(".tab-panel").eq(g).fadeIn(350).addClass("active");return false}else{return false}})};a.fn.accordion=function(b){var f={direction:"vertical"};var b=a.extend({},f,b),d=a(this).find("li"),g=d.eq(0),c=d.find("h3"),e=d.find(".accordion-panel");d.find("h3").click(function(h){if(!a(this).parent().hasClass("active")){h.preventDefault();d.removeClass("active");a(this).parent().addClass("active");if(b.direction=="vertical"){e.slideUp(350);a(this).next().slideDown(350)}else{d.animate({width:"40px"},{duration:350,queue:false});a(this).parent().animate({width:"80%"},{duration:350,queue:false})}}else{if(b.direction=="vertical"){h.preventDefault();d.removeClass("active");if(b.direction=="vertical"){e.slideUp(350)}}return false}})}})(jQuery);